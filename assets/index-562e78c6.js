const yt=[],F=new Map,gt=new Map,Ie=new Map,pe=new Map,Wr=(n,t)=>{for(let e=0,r=0,i=n.length;e<i;e+=1,r+=3)F.get(n[e]).applyImpulse({x:t[r+0],y:t[r+1],z:t[r+2]},!0)},qr=(n,t)=>{for(let e=0,r=0,i=n.length;e<i;e+=1,r+=6){const o=F.get(n[e]);o.applyImpulse({x:t[r+0],y:t[r+1],z:t[r+2]},!1),o.applyTorqueImpulse({x:t[r+3],y:t[r+4],z:t[r+5]},!0)}},Jr=(n,t)=>{for(let e=0,r=0,i=n.length;e<i;e+=1,r+=3)F.get(n[e]).applyTorqueImpulse({x:t[r+0],y:t[r+1],z:t[r+2]},!0)},Ae=n=>{n.setAngvel({x:0,y:0,z:0},!0)},Te=n=>{n.setLinvel({x:0,y:0,z:0},!0)},Yr=n=>{const t=F.get(n);t.setLinvel({x:0,y:0,z:0},!1),t.setAngvel({x:0,y:0,z:0},!1),t.setTranslation({x:0,y:1050+n*4,z:0},!1)},Kr=(n,t)=>{gt.get(n).setActiveCollisionTypes(t)},Xr=(n,t)=>{for(let e=0,r=0,i=n.length;e<i;e+=1,r+=6){const o=F.get(n[e]);o.resetForces(!0),o.resetTorques(!0),o.addForce({x:t[r+0],y:t[r+1],z:t[r+2]},!0),o.addTorque({x:t[r+3],y:t[r+4],z:t[r+5]},!0)}},Zr=n=>{const t=F.get(n.id);t.setNextKinematicTranslation(n.translation),t.setNextKinematicRotation(n.rotation)},$r=(n,t)=>{for(let e=0,r=0,i=n.length;e<i;e+=1,r+=7){const o=F.get(n[e]);o.setNextKinematicTranslation({x:t[r+0],y:t[r+1],z:t[r+2]}),o.setNextKinematicRotation({w:t[r+6],x:t[r+3],y:t[r+4],z:t[r+5]})}},Qr=(n,t,e,r)=>{for(let i=0,o=0,a=n.length;i<a;i+=1,o+=7){const l=F.get(n[i]);l.setTranslation({x:t[o+0],y:t[o+1],z:t[o+2]},!1),l.setRotation({w:t[o+6],x:t[o+3],y:t[o+4],z:t[o+5]},!0),e&&Ae(l),r&&Te(l)}},tn=(n,t,e,r,i)=>{const o=F.get(n);o.setTranslation(t,!0),o.setRotation(e,!0),o.setLinvel(r,!0),o.setAngvel(i,!0)},en=(n,t)=>{for(let e=0,r=0,i=n.length;e<i;e+=1,r+=13){const o=F.get(n[e]);o.setTranslation({x:t[r+0],y:t[r+1],z:t[r+2]},!0),o.setRotation({w:t[r+6],x:t[r+3],y:t[r+4],z:t[r+5]},!0),o.setLinvel({x:t[r+7],y:t[r+8],z:t[r+9]},!0),o.setAngvel({x:t[r+10],y:t[r+11],z:t[r+12]},!0)}},rn=(n,t,e,r)=>{const i=F.get(n);i.setTranslation(t,!0),e&&Ae(i),r&&Te(i)},nn=(n,t,e,r)=>{for(let i=0,o=0,a=n.length;i<a;i+=1,o+=3){const l=F.get(n[i]);l.setTranslation({x:t[o+0],y:t[o+1],z:t[o+2]},!0),e&&Ae(l),r&&Te(l)}},sn=(n,t)=>{for(let e=0,r=0,i=n.length;e<i;e+=1,r+=6){const o=F.get(n[e]);o.setLinvel({x:t[r+0],y:t[r+1],z:t[r+2]},!1),o.setAngvel({x:t[r+3],y:t[r+4],z:t[r+5]},!0)}},on=(n,t)=>{for(let e=0,r=0,i=n.length;e<i;e+=1,r+=7){const o=F.get(n[e]);o.setLinvel({x:t[r+0],y:t[r+1],z:t[r+2]},!0),o.setRotation({w:t[r+6],x:t[r+3],y:t[r+4],z:t[r+5]},!0)}};var C=(n=>(n[n.FPS=0]="FPS",n[n.INIT=1]="INIT",n[n.RUN=2]="RUN",n[n.PAUSE=3]="PAUSE",n[n.GET_VELOCITY=4]="GET_VELOCITY",n[n.GET_VELOCITIES=5]="GET_VELOCITIES",n[n.SET_ACTIVE_COLLISION_TYPES=6]="SET_ACTIVE_COLLISION_TYPES",n[n.SET_DEBUG_DRAW=7]="SET_DEBUG_DRAW",n[n.SET_GRAVITY=8]="SET_GRAVITY",n[n.SET_FORCES=9]="SET_FORCES",n[n.SET_FRICTION=10]="SET_FRICTION",n[n.SET_MASKS=11]="SET_MASKS",n[n.SET_MASSES=12]="SET_MASSES",n[n.SET_ROTATION=13]="SET_ROTATION",n[n.SET_TRANSFORM=14]="SET_TRANSFORM",n[n.SET_TRANSFORMS=15]="SET_TRANSFORMS",n[n.SET_TRANSFORM_AND_VELOCITY=16]="SET_TRANSFORM_AND_VELOCITY",n[n.SET_TRANSFORMS_AND_VELOCITIES=17]="SET_TRANSFORMS_AND_VELOCITIES",n[n.SET_TRANSLATION=18]="SET_TRANSLATION",n[n.SET_TRANSLATIONS=19]="SET_TRANSLATIONS",n[n.SET_NEXT_KINEMATIC_TRANSFORM=20]="SET_NEXT_KINEMATIC_TRANSFORM",n[n.SET_NEXT_KINEMATIC_TRANSFORMS=21]="SET_NEXT_KINEMATIC_TRANSFORMS",n[n.SET_VELOCITIES=22]="SET_VELOCITIES",n[n.SET_VELOCITIES_AND_ROTATIONS=23]="SET_VELOCITIES_AND_ROTATIONS",n[n.CREATE_RIGIDBODY=24]="CREATE_RIGIDBODY",n[n.CREATE_RIGIDBODIES=25]="CREATE_RIGIDBODIES",n[n.DESTROY_RIGIDBODIES=26]="DESTROY_RIGIDBODIES",n[n.DESTROY_ALL_RIGIDBODIES=27]="DESTROY_ALL_RIGIDBODIES",n[n.CREATE_TRIGGER=28]="CREATE_TRIGGER",n[n.CREATE_TRIGGERS=29]="CREATE_TRIGGERS",n[n.APPLY_IMPULSES=30]="APPLY_IMPULSES",n[n.APPLY_TORQUE_IMPULSE=31]="APPLY_TORQUE_IMPULSE",n[n.APPLY_TORQUE_IMPULSES=32]="APPLY_TORQUE_IMPULSES",n[n.APPLY_CENTRAL_AND_TORQUE_IMPULSE=33]="APPLY_CENTRAL_AND_TORQUE_IMPULSE",n[n.APPLY_LINEAR_AND_TORQUE_IMPULSES=34]="APPLY_LINEAR_AND_TORQUE_IMPULSES",n[n.APPLY_CENTRAL_FORCES=35]="APPLY_CENTRAL_FORCES",n[n.ENABLE_BODY=36]="ENABLE_BODY",n[n.DISABLE_BODY=37]="DISABLE_BODY",n[n.RAYCAST=38]="RAYCAST",n[n.COLLISIONS=39]="COLLISIONS",n[n.TRANSFORMS=40]="TRANSFORMS",n[n.DEBUG_DRAW=41]="DEBUG_DRAW",n))(C||{});const an=(n,t)=>{const e=F.get(n),r=e.linvel(),i=e.angvel();self.postMessage({angvel:i,event:C.GET_VELOCITY,linvel:r,pid:t})},cn=(n,t)=>{const e=new Float32Array(n.length*6);for(let r=0,i=0,o=n.length;r<o;r+=1,i+=6){const a=F.get(n[r]),l=a.linvel(),w=a.angvel();e[i+0]=l.x,e[i+1]=l.y,e[i+2]=l.z,e[i+3]=w.x,e[i+4]=w.y,e[i+5]=w.z}self.postMessage({event:C.GET_VELOCITIES,pid:t,velocities:e},[e.buffer])};var sr=(n=>(n[n.COLLISION_EVENTS=0]="COLLISION_EVENTS",n[n.CONTACT_EVENTS=1]="CONTACT_EVENTS",n[n.CONTACT_FORCE_EVENTS=2]="CONTACT_FORCE_EVENTS",n))(sr||{}),ln="/sword/assets/rapier_wasm3d_bg-a8e9a6c4.wasm",dn=async(n={},t)=>{let e;if(t.startsWith("data:")){const r=t.replace(/^data:.*?base64,/,"");let i;if(typeof Buffer=="function"&&typeof Buffer.from=="function")i=Buffer.from(r,"base64");else if(typeof atob=="function"){const o=atob(r);i=new Uint8Array(o.length);for(let a=0;a<o.length;a++)i[a]=o.charCodeAt(a)}else throw new Error("Cannot decode base64-encoded data URL");e=await WebAssembly.instantiate(i,n)}else{const r=await fetch(t),i=r.headers.get("Content-Type")||"";if("instantiateStreaming"in WebAssembly&&i.startsWith("application/wasm"))e=await WebAssembly.instantiateStreaming(r,n);else{const o=await r.arrayBuffer();e=await WebAssembly.instantiate(o,n)}}return e.instance.exports};const I=new Array(32).fill(void 0);I.push(void 0,null,!0,!1);function A(n){return I[n]}let mt=I.length;function hn(n){n<36||(I[n]=mt,mt=n)}function St(n){const t=A(n);return hn(n),t}function L(n){mt===I.length&&I.push(I.length+1);const t=mt;return mt=I[t],I[t]=n,t}function m(n){return n==null}let ce=new Float64Array;function Ot(){return ce.byteLength===0&&(ce=new Float64Array(ut.buffer)),ce}let le=new Int32Array;function v(){return le.byteLength===0&&(le=new Int32Array(ut.buffer)),le}const wn=typeof TextDecoder>"u"?(0,module.require)("util").TextDecoder:TextDecoder;let or=new wn("utf-8",{ignoreBOM:!0,fatal:!0});or.decode();let de=new Uint8Array;function pn(){return de.byteLength===0&&(de=new Uint8Array(ut.buffer)),de}function ar(n,t){return or.decode(pn().subarray(n,n+t))}function un(){try{const e=E(-16);zn(e);var n=v()[e/4+0],t=v()[e/4+1];return ar(n,t)}finally{E(16),Dt(n,t)}}function c(n,t){if(!(n instanceof t))throw new Error(`expected instance of ${t.name}`);return n.ptr}let he=new Float32Array;function rt(){return he.byteLength===0&&(he=new Float32Array(ut.buffer)),he}let P=32;function M(n){if(P==1)throw new Error("out of js stack");return I[--P]=n,P}function tr(n,t){return rt().subarray(n/4,n/4+t)}let we=new Uint32Array;function cr(){return we.byteLength===0&&(we=new Uint32Array(ut.buffer)),we}function _n(n,t){return cr().subarray(n/4,n/4+t)}let G=0;function at(n,t){const e=t(n.length*4);return rt().set(n,e/4),G=n.length,e}function Lt(n,t){const e=t(n.length*4);return cr().set(n,e/4),G=n.length,e}function ve(n,t){try{return n.apply(this,t)}catch(e){Kd(L(e))}}const qt=Object.freeze({X:0,0:"X",Y:1,1:"Y",Z:2,2:"Z",AngX:3,3:"AngX",AngY:4,4:"AngY",AngZ:5,5:"AngZ"});class nt{static __wrap(t){const e=Object.create(nt.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();Ko(t)}constructor(){const t=Xo();return nt.__wrap(t)}}class ht{static __wrap(t){const e=Object.create(ht.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();fi(t)}constructor(){const t=mi();return ht.__wrap(t)}}class Rt{static __wrap(t){const e=Object.create(Rt.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();di(t)}constructor(){const t=hi();return Rt.__wrap(t)}handle(){return jt(this.ptr)}translationApplied(){const t=wi(this.ptr);return h.__wrap(t)}translationRemaining(){const t=pi(this.ptr);return h.__wrap(t)}toi(){return lt(this.ptr)}worldWitness1(){const t=Qt(this.ptr);return h.__wrap(t)}worldWitness2(){const t=ui(this.ptr);return h.__wrap(t)}worldNormal1(){const t=De(this.ptr);return h.__wrap(t)}worldNormal2(){const t=_i(this.ptr);return h.__wrap(t)}}class x{static __wrap(t){const e=Object.create(x.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();ac(t)}coTranslation(t){const e=Zo(this.ptr,t);return h.__wrap(e)}coRotation(t){const e=$o(this.ptr,t);return S.__wrap(e)}coSetTranslation(t,e,r,i){Qo(this.ptr,t,e,r,i)}coSetTranslationWrtParent(t,e,r,i){ta(this.ptr,t,e,r,i)}coSetRotation(t,e,r,i,o){ea(this.ptr,t,e,r,i,o)}coSetRotationWrtParent(t,e,r,i,o){ra(this.ptr,t,e,r,i,o)}coIsSensor(t){return na(this.ptr,t)!==0}coShapeType(t){return ia(this.ptr,t)>>>0}coHalfspaceNormal(t){const e=sa(this.ptr,t);return e===0?void 0:h.__wrap(e)}coHalfExtents(t){const e=oa(this.ptr,t);return e===0?void 0:h.__wrap(e)}coSetHalfExtents(t,e){c(e,h),aa(this.ptr,t,e.ptr)}coRadius(t){try{const i=E(-16);ca(i,this.ptr,t);var e=v()[i/4+0],r=rt()[i/4+1];return e===0?void 0:r}finally{E(16)}}coSetRadius(t,e){la(this.ptr,t,e)}coHalfHeight(t){try{const i=E(-16);da(i,this.ptr,t);var e=v()[i/4+0],r=rt()[i/4+1];return e===0?void 0:r}finally{E(16)}}coSetHalfHeight(t,e){ha(this.ptr,t,e)}coRoundRadius(t){try{const i=E(-16);wa(i,this.ptr,t);var e=v()[i/4+0],r=rt()[i/4+1];return e===0?void 0:r}finally{E(16)}}coSetRoundRadius(t,e){pa(this.ptr,t,e)}coVertices(t){try{const i=E(-16);ua(i,this.ptr,t);var e=v()[i/4+0],r=v()[i/4+1];let o;return e!==0&&(o=tr(e,r).slice(),Dt(e,r*4)),o}finally{E(16)}}coIndices(t){try{const i=E(-16);_a(i,this.ptr,t);var e=v()[i/4+0],r=v()[i/4+1];let o;return e!==0&&(o=_n(e,r).slice(),Dt(e,r*4)),o}finally{E(16)}}coHeightfieldHeights(t){try{const i=E(-16);fa(i,this.ptr,t);var e=v()[i/4+0],r=v()[i/4+1];let o;return e!==0&&(o=tr(e,r).slice(),Dt(e,r*4)),o}finally{E(16)}}coHeightfieldScale(t){const e=ma(this.ptr,t);return e===0?void 0:h.__wrap(e)}coHeightfieldNRows(t){try{const i=E(-16);ba(i,this.ptr,t);var e=v()[i/4+0],r=v()[i/4+1];return e===0?void 0:r>>>0}finally{E(16)}}coHeightfieldNCols(t){try{const i=E(-16);ya(i,this.ptr,t);var e=v()[i/4+0],r=v()[i/4+1];return e===0?void 0:r>>>0}finally{E(16)}}coParent(t){try{const i=E(-16);ga(i,this.ptr,t);var e=v()[i/4+0],r=Ot()[i/8+1];return e===0?void 0:r}finally{E(16)}}coSetEnabled(t,e){Sa(this.ptr,t,e)}coIsEnabled(t){return Ra(this.ptr,t)!==0}coFriction(t){return Ea(this.ptr,t)}coRestitution(t){return Ca(this.ptr,t)}coDensity(t){return Ia(this.ptr,t)}coMass(t){return Aa(this.ptr,t)}coVolume(t){return Ta(this.ptr,t)}coCollisionGroups(t){return va(this.ptr,t)>>>0}coSolverGroups(t){return ja(this.ptr,t)>>>0}coActiveHooks(t){return Pa(this.ptr,t)>>>0}coActiveCollisionTypes(t){return Ma(this.ptr,t)}coActiveEvents(t){return xa(this.ptr,t)>>>0}coContactForceEventThreshold(t){return Na(this.ptr,t)}coContainsPoint(t,e){return c(e,h),La(this.ptr,t,e.ptr)!==0}coCastShape(t,e,r,i,o,a,l,w){c(e,h),c(r,y),c(i,h),c(o,S),c(a,h);const p=Da(this.ptr,t,e.ptr,r.ptr,i.ptr,o.ptr,a.ptr,l,w);return p===0?void 0:Zt.__wrap(p)}coCastCollider(t,e,r,i,o,a){c(e,h),c(i,h);const l=Oa(this.ptr,t,e.ptr,r,i.ptr,o,a);return l===0?void 0:Xt.__wrap(l)}coIntersectsShape(t,e,r,i){return c(e,y),c(r,h),c(i,S),Fa(this.ptr,t,e.ptr,r.ptr,i.ptr)!==0}coContactShape(t,e,r,i,o){c(e,y),c(r,h),c(i,S);const a=za(this.ptr,t,e.ptr,r.ptr,i.ptr,o);return a===0?void 0:It.__wrap(a)}coContactCollider(t,e,r){const i=Ha(this.ptr,t,e,r);return i===0?void 0:It.__wrap(i)}coProjectPoint(t,e,r){c(e,h);const i=Ga(this.ptr,t,e.ptr,r);return Jt.__wrap(i)}coIntersectsRay(t,e,r,i){return c(e,h),c(r,h),ka(this.ptr,t,e.ptr,r.ptr,i)!==0}coCastRay(t,e,r,i,o){return c(e,h),c(r,h),Ba(this.ptr,t,e.ptr,r.ptr,i,o)}coCastRayAndGetNormal(t,e,r,i,o){c(e,h),c(r,h);const a=Va(this.ptr,t,e.ptr,r.ptr,i,o);return a===0?void 0:Kt.__wrap(a)}coSetSensor(t,e){Ua(this.ptr,t,e)}coSetRestitution(t,e){Wa(this.ptr,t,e)}coSetFriction(t,e){qa(this.ptr,t,e)}coFrictionCombineRule(t){return Ja(this.ptr,t)>>>0}coSetFrictionCombineRule(t,e){Ya(this.ptr,t,e)}coRestitutionCombineRule(t){return Ka(this.ptr,t)>>>0}coSetRestitutionCombineRule(t,e){Xa(this.ptr,t,e)}coSetCollisionGroups(t,e){Za(this.ptr,t,e)}coSetSolverGroups(t,e){$a(this.ptr,t,e)}coSetActiveHooks(t,e){Qa(this.ptr,t,e)}coSetActiveEvents(t,e){tc(this.ptr,t,e)}coSetActiveCollisionTypes(t,e){ec(this.ptr,t,e)}coSetShape(t,e){c(e,y),rc(this.ptr,t,e.ptr)}coSetContactForceEventThreshold(t,e){nc(this.ptr,t,e)}coSetDensity(t,e){ic(this.ptr,t,e)}coSetMass(t,e){sc(this.ptr,t,e)}coSetMassProperties(t,e,r,i,o){c(r,h),c(i,h),c(o,S),oc(this.ptr,t,e,r.ptr,i.ptr,o.ptr)}constructor(){const t=cc();return x.__wrap(t)}len(){return lc(this.ptr)>>>0}contains(t){return er(this.ptr,t)!==0}createCollider(t,e,r,i,o,a,l,w,p,u,_,f,b,j,H,k,V,z,Y,ft,ie,se,oe,Nt){try{const ae=E(-16);c(e,y),c(r,h),c(i,S),c(l,h),c(w,h),c(p,S),c(Nt,N),dc(ae,this.ptr,t,e.ptr,r.ptr,i.ptr,o,a,l.ptr,w.ptr,p.ptr,u,_,f,b,j,H,k,V,z,Y,ft,ie,se,oe,Nt.ptr);var Qe=v()[ae/4+0],Ur=Ot()[ae/8+1];return Qe===0?void 0:Ur}finally{E(16)}}remove(t,e,r,i){c(e,Z),c(r,N),hc(this.ptr,t,e.ptr,r.ptr,i)}isHandleValid(t){return er(this.ptr,t)!==0}forEachColliderHandle(t){try{wc(this.ptr,M(t))}finally{I[P++]=void 0}}}class je{static __wrap(t){const e=Object.create(je.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();id(t)}collider1(){return jt(this.ptr)}collider2(){return sd(this.ptr)}total_force(){const t=pr(this.ptr);return h.__wrap(t)}total_force_magnitude(){return od(this.ptr)}max_force_direction(){const t=ad(this.ptr);return h.__wrap(t)}max_force_magnitude(){return cd(this.ptr)}}class Pe{static __wrap(t){const e=Object.create(Pe.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();Sc(t)}normal(){const t=Ac(this.ptr);return h.__wrap(t)}local_n1(){const t=Tc(this.ptr);return h.__wrap(t)}local_n2(){const t=vc(this.ptr);return h.__wrap(t)}subshape1(){return jc(this.ptr)>>>0}subshape2(){return Pc(this.ptr)>>>0}num_contacts(){return Mc(this.ptr)>>>0}contact_local_p1(t){const e=xc(this.ptr,t);return e===0?void 0:h.__wrap(e)}contact_local_p2(t){const e=Nc(this.ptr,t);return e===0?void 0:h.__wrap(e)}contact_dist(t){return Lc(this.ptr,t)}contact_fid1(t){return Dc(this.ptr,t)>>>0}contact_fid2(t){return Oc(this.ptr,t)>>>0}contact_impulse(t){return Fc(this.ptr,t)}contact_tangent_impulse_x(t){return zc(this.ptr,t)}contact_tangent_impulse_y(t){return Hc(this.ptr,t)}num_solver_contacts(){return Gc(this.ptr)>>>0}solver_contact_point(t){const e=kc(this.ptr,t);return e===0?void 0:h.__wrap(e)}solver_contact_dist(t){return Bc(this.ptr,t)}solver_contact_friction(t){return Vc(this.ptr,t)}solver_contact_restitution(t){return Uc(this.ptr,t)}solver_contact_tangent_velocity(t){const e=Wc(this.ptr,t);return h.__wrap(e)}}class Me{static __wrap(t){const e=Object.create(Me.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();Bd(t)}collider1(){return Rc(this.ptr)}collider2(){return Ec(this.ptr)}numContactManifolds(){return Cc(this.ptr)>>>0}contactManifold(t){const e=Ic(this.ptr,t);return e===0?void 0:Pe.__wrap(e)}}class Ft{static __wrap(t){const e=Object.create(Ft.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();$l(t)}constructor(){const t=Ql();return Ft.__wrap(t)}vertices(){const t=td(this.ptr);return St(t)}colors(){const t=ed(this.ptr);return St(t)}render(t,e,r,i,o){c(t,N),c(e,x),c(r,X),c(i,$),c(o,tt),rd(this.ptr,t.ptr,e.ptr,r.ptr,i.ptr,o.ptr)}}class xe{static __wrap(t){const e=Object.create(xe.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();Pd(t)}takeGravity(){const t=Md(this.ptr);return t===0?void 0:h.__wrap(t)}takeIntegrationParameters(){const t=xd(this.ptr);return t===0?void 0:it.__wrap(t)}takeIslandManager(){const t=Nd(this.ptr);return t===0?void 0:Z.__wrap(t)}takeBroadPhase(){const t=Ld(this.ptr);return t===0?void 0:nt.__wrap(t)}takeNarrowPhase(){const t=Dd(this.ptr);return t===0?void 0:tt.__wrap(t)}takeBodies(){const t=Od(this.ptr);return t===0?void 0:N.__wrap(t)}takeColliders(){const t=Fd(this.ptr);return t===0?void 0:x.__wrap(t)}takeImpulseJoints(){const t=zd(this.ptr);return t===0?void 0:X.__wrap(t)}takeMultibodyJoints(){const t=Hd(this.ptr);return t===0?void 0:$.__wrap(t)}}class Et{static __wrap(t){const e=Object.create(Et.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();nd(t)}constructor(t){const e=ld(t);return Et.__wrap(e)}drainCollisionEvents(t){try{dd(this.ptr,M(t))}finally{I[P++]=void 0}}drainContactForceEvents(t){try{hd(this.ptr,M(t))}finally{I[P++]=void 0}}clear(){wd(this.ptr)}}class B{static __wrap(t){const e=Object.create(B.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();ds(t)}static spherical(t,e){c(t,h),c(e,h);const r=hs(t.ptr,e.ptr);return B.__wrap(r)}static prismatic(t,e,r,i,o,a){c(t,h),c(e,h),c(r,h);const l=ws(t.ptr,e.ptr,r.ptr,i,o,a);return l===0?void 0:B.__wrap(l)}static fixed(t,e,r,i){c(t,h),c(e,S),c(r,h),c(i,S);const o=ps(t.ptr,e.ptr,r.ptr,i.ptr);return B.__wrap(o)}static revolute(t,e,r){c(t,h),c(e,h),c(r,h);const i=us(t.ptr,e.ptr,r.ptr);return i===0?void 0:B.__wrap(i)}}class X{static __wrap(t){const e=Object.create(X.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();Fi(t)}jointType(t){return bi(this.ptr,t)>>>0}jointBodyHandle1(t){return yi(this.ptr,t)}jointBodyHandle2(t){return gi(this.ptr,t)}jointFrameX1(t){const e=Si(this.ptr,t);return S.__wrap(e)}jointFrameX2(t){const e=Ri(this.ptr,t);return S.__wrap(e)}jointAnchor1(t){const e=Ei(this.ptr,t);return h.__wrap(e)}jointAnchor2(t){const e=Ci(this.ptr,t);return h.__wrap(e)}jointSetAnchor1(t,e){c(e,h),Ii(this.ptr,t,e.ptr)}jointSetAnchor2(t,e){c(e,h),Ai(this.ptr,t,e.ptr)}jointContactsEnabled(t){return Ti(this.ptr,t)!==0}jointSetContactsEnabled(t,e){vi(this.ptr,t,e)}jointLimitsEnabled(t,e){return ji(this.ptr,t,e)!==0}jointLimitsMin(t,e){return Pi(this.ptr,t,e)}jointLimitsMax(t,e){return Mi(this.ptr,t,e)}jointSetLimits(t,e,r,i){xi(this.ptr,t,e,r,i)}jointConfigureMotorModel(t,e,r){Ni(this.ptr,t,e,r)}jointConfigureMotorVelocity(t,e,r,i){Li(this.ptr,t,e,r,i)}jointConfigureMotorPosition(t,e,r,i,o){Di(this.ptr,t,e,r,i,o)}jointConfigureMotor(t,e,r,i,o,a){Oi(this.ptr,t,e,r,i,o,a)}constructor(){const t=zi();return X.__wrap(t)}createJoint(t,e,r,i){return c(t,B),Hi(this.ptr,t.ptr,e,r,i)}remove(t,e){Gi(this.ptr,t,e)}len(){return ki(this.ptr)>>>0}contains(t){return Bi(this.ptr,t)!==0}forEachJointHandle(t){try{Vi(this.ptr,M(t))}finally{I[P++]=void 0}}forEachJointAttachedToRigidBody(t,e){try{Ui(this.ptr,t,M(e))}finally{I[P++]=void 0}}}class it{static __wrap(t){const e=Object.create(it.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();Wi(t)}constructor(){const t=qi();return it.__wrap(t)}get dt(){return te(this.ptr)}get erp(){return lt(this.ptr)}get allowedLinearError(){return Ji(this.ptr)}get predictionDistance(){return Yi(this.ptr)}get maxVelocityIterations(){return Ki(this.ptr)>>>0}get maxVelocityFrictionIterations(){return Xi(this.ptr)>>>0}get maxStabilizationIterations(){return Zi(this.ptr)>>>0}get minIslandSize(){return $i(this.ptr)>>>0}get maxCcdSubsteps(){return Qi(this.ptr)>>>0}set dt(t){lr(this.ptr,t)}set erp(t){dr(this.ptr,t)}set allowedLinearError(t){ts(this.ptr,t)}set predictionDistance(t){es(this.ptr,t)}set maxVelocityIterations(t){rs(this.ptr,t)}set maxVelocityFrictionIterations(t){ns(this.ptr,t)}set maxStabilizationIterations(t){is(this.ptr,t)}set minIslandSize(t){ss(this.ptr,t)}set maxCcdSubsteps(t){os(this.ptr,t)}}class Z{static __wrap(t){const e=Object.create(Z.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();as(t)}constructor(){const t=cs();return Z.__wrap(t)}forEachActiveRigidBodyHandle(t){try{ls(this.ptr,M(t))}finally{I[P++]=void 0}}}class zt{static __wrap(t){const e=Object.create(zt.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();Hn(t)}constructor(t){const e=Gn(t);return zt.__wrap(e)}up(){const t=kn(this.ptr);return h.__wrap(t)}setUp(t){c(t,h),Bn(this.ptr,t.ptr)}offset(){return Vn(this.ptr)}setOffset(t){Un(this.ptr,t)}slideEnabled(){return Wn(this.ptr)!==0}setSlideEnabled(t){qn(this.ptr,t)}autostepMaxHeight(){try{const r=E(-16);Jn(r,this.ptr);var t=v()[r/4+0],e=rt()[r/4+1];return t===0?void 0:e}finally{E(16)}}autostepMinWidth(){try{const r=E(-16);Yn(r,this.ptr);var t=v()[r/4+0],e=rt()[r/4+1];return t===0?void 0:e}finally{E(16)}}autostepIncludesDynamicBodies(){const t=Kn(this.ptr);return t===16777215?void 0:t!==0}autostepEnabled(){return Xn(this.ptr)!==0}enableAutostep(t,e,r){Zn(this.ptr,t,e,r)}disableAutostep(){$n(this.ptr)}maxSlopeClimbAngle(){return Qn(this.ptr)}setMaxSlopeClimbAngle(t){ti(this.ptr,t)}minSlopeSlideAngle(){return ei(this.ptr)}setMinSlopeSlideAngle(t){ri(this.ptr,t)}snapToGroundDistance(){try{const r=E(-16);ni(r,this.ptr);var t=v()[r/4+0],e=rt()[r/4+1];return t===0?void 0:e}finally{E(16)}}enableSnapToGround(t){ii(this.ptr,t)}disableSnapToGround(){si(this.ptr)}snapToGroundEnabled(){return oi(this.ptr)!==0}computeColliderMovement(t,e,r,i,o,a,l,w,p,u,_){try{c(e,N),c(r,x),c(i,Ct),c(a,h),ai(this.ptr,t,e.ptr,r.ptr,i.ptr,o,a.ptr,l,!m(w),m(w)?0:w,p,!m(u),m(u)?0:u,M(_))}finally{I[P++]=void 0}}computedMovement(){const t=$t(this.ptr);return h.__wrap(t)}computedGrounded(){return Le(this.ptr)!==0}numComputedCollisions(){return ci(this.ptr)>>>0}computedCollision(t,e){return c(e,Rt),li(this.ptr,t,e.ptr)!==0}}class ${static __wrap(t){const e=Object.create($.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();Is(t)}jointType(t){return _s(this.ptr,t)>>>0}jointFrameX1(t){const e=fs(this.ptr,t);return S.__wrap(e)}jointFrameX2(t){const e=ms(this.ptr,t);return S.__wrap(e)}jointAnchor1(t){const e=bs(this.ptr,t);return h.__wrap(e)}jointAnchor2(t){const e=ys(this.ptr,t);return h.__wrap(e)}jointContactsEnabled(t){return gs(this.ptr,t)!==0}jointSetContactsEnabled(t,e){Ss(this.ptr,t,e)}jointLimitsEnabled(t,e){return Rs(this.ptr,t,e)!==0}jointLimitsMin(t,e){return Es(this.ptr,t,e)}jointLimitsMax(t,e){return Cs(this.ptr,t,e)}constructor(){const t=As();return $.__wrap(t)}createJoint(t,e,r,i){return c(t,B),Ts(this.ptr,t.ptr,e,r,i)}remove(t,e){vs(this.ptr,t,e)}contains(t){return js(this.ptr,t)!==0}forEachJointHandle(t){try{Ps(this.ptr,M(t))}finally{I[P++]=void 0}}forEachJointAttachedToRigidBody(t,e){try{Ms(this.ptr,t,M(e))}finally{I[P++]=void 0}}}class tt{static __wrap(t){const e=Object.create(tt.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();_c(t)}constructor(){const t=fc();return tt.__wrap(t)}contacts_with(t,e){mc(this.ptr,t,L(e))}contact_pair(t,e){const r=bc(this.ptr,t,e);return r===0?void 0:Me.__wrap(r)}intersections_with(t,e){yc(this.ptr,t,L(e))}intersection_pair(t,e){return gc(this.ptr,t,e)!==0}}class Ht{static __wrap(t){const e=Object.create(Ht.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();pd(t)}constructor(){const t=ud();return Ht.__wrap(t)}step(t,e,r,i,o,a,l,w,p,u){c(t,h),c(e,it),c(r,Z),c(i,nt),c(o,tt),c(a,N),c(l,x),c(w,X),c(p,$),c(u,ht),_d(this.ptr,t.ptr,e.ptr,r.ptr,i.ptr,o.ptr,a.ptr,l.ptr,w.ptr,p.ptr,u.ptr)}stepWithEvents(t,e,r,i,o,a,l,w,p,u,_,f,b,j){c(t,h),c(e,it),c(r,Z),c(i,nt),c(o,tt),c(a,N),c(l,x),c(w,X),c(p,$),c(u,ht),c(_,Et),fd(this.ptr,t.ptr,e.ptr,r.ptr,i.ptr,o.ptr,a.ptr,l.ptr,w.ptr,p.ptr,u.ptr,_.ptr,L(f),L(b),L(j))}}class Gt{static __wrap(t){const e=Object.create(Gt.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();Jc(t)}colliderHandle(){return Yc(this.ptr)}point(){const t=$t(this.ptr);return h.__wrap(t)}isInside(){return Le(this.ptr)!==0}featureType(){return Kc(this.ptr)>>>0}featureId(){try{const r=E(-16);Xc(r,this.ptr);var t=v()[r/4+0],e=v()[r/4+1];return t===0?void 0:e>>>0}finally{E(16)}}}class Jt{static __wrap(t){const e=Object.create(Jt.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();qc(t)}point(){const t=$t(this.ptr);return h.__wrap(t)}isInside(){return Le(this.ptr)!==0}}class Ct{static __wrap(t){const e=Object.create(Ct.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();md(t)}constructor(){const t=bd();return Ct.__wrap(t)}update(t,e){c(t,N),c(e,x),yd(this.ptr,t.ptr,e.ptr)}castRay(t,e,r,i,o,a,l,w,p,u,_){try{c(t,N),c(e,x),c(r,h),c(i,h);const f=gd(this.ptr,t.ptr,e.ptr,r.ptr,i.ptr,o,a,l,!m(w),m(w)?0:w,!m(p),m(p)?0:p,!m(u),m(u)?0:u,M(_));return f===0?void 0:Ne.__wrap(f)}finally{I[P++]=void 0}}castRayAndGetNormal(t,e,r,i,o,a,l,w,p,u,_){try{c(t,N),c(e,x),c(r,h),c(i,h);const f=Sd(this.ptr,t.ptr,e.ptr,r.ptr,i.ptr,o,a,l,!m(w),m(w)?0:w,!m(p),m(p)?0:p,!m(u),m(u)?0:u,M(_));return f===0?void 0:Yt.__wrap(f)}finally{I[P++]=void 0}}intersectionsWithRay(t,e,r,i,o,a,l,w,p,u,_,f){try{c(t,N),c(e,x),c(r,h),c(i,h),Rd(this.ptr,t.ptr,e.ptr,r.ptr,i.ptr,o,a,M(l),w,!m(p),m(p)?0:p,!m(u),m(u)?0:u,!m(_),m(_)?0:_,M(f))}finally{I[P++]=void 0,I[P++]=void 0}}intersectionWithShape(t,e,r,i,o,a,l,w,p,u){try{const b=E(-16);c(t,N),c(e,x),c(r,h),c(i,S),c(o,y),Ed(b,this.ptr,t.ptr,e.ptr,r.ptr,i.ptr,o.ptr,a,!m(l),m(l)?0:l,!m(w),m(w)?0:w,!m(p),m(p)?0:p,M(u));var _=v()[b/4+0],f=Ot()[b/8+1];return _===0?void 0:f}finally{E(16),I[P++]=void 0}}projectPoint(t,e,r,i,o,a,l,w,p){try{c(t,N),c(e,x),c(r,h);const u=Cd(this.ptr,t.ptr,e.ptr,r.ptr,i,o,!m(a),m(a)?0:a,!m(l),m(l)?0:l,!m(w),m(w)?0:w,M(p));return u===0?void 0:Gt.__wrap(u)}finally{I[P++]=void 0}}projectPointAndGetFeature(t,e,r,i,o,a,l,w){try{c(t,N),c(e,x),c(r,h);const p=Id(this.ptr,t.ptr,e.ptr,r.ptr,i,!m(o),m(o)?0:o,!m(a),m(a)?0:a,!m(l),m(l)?0:l,M(w));return p===0?void 0:Gt.__wrap(p)}finally{I[P++]=void 0}}intersectionsWithPoint(t,e,r,i,o,a,l,w,p){try{c(t,N),c(e,x),c(r,h),Ad(this.ptr,t.ptr,e.ptr,r.ptr,M(i),o,!m(a),m(a)?0:a,!m(l),m(l)?0:l,!m(w),m(w)?0:w,M(p))}finally{I[P++]=void 0,I[P++]=void 0}}castShape(t,e,r,i,o,a,l,w,p,u,_,f,b){try{c(t,N),c(e,x),c(r,h),c(i,S),c(o,h),c(a,y);const j=Td(this.ptr,t.ptr,e.ptr,r.ptr,i.ptr,o.ptr,a.ptr,l,w,p,!m(u),m(u)?0:u,!m(_),m(_)?0:_,!m(f),m(f)?0:f,M(b));return j===0?void 0:Xt.__wrap(j)}finally{I[P++]=void 0}}intersectionsWithShape(t,e,r,i,o,a,l,w,p,u,_){try{c(t,N),c(e,x),c(r,h),c(i,S),c(o,y),vd(this.ptr,t.ptr,e.ptr,r.ptr,i.ptr,o.ptr,M(a),l,!m(w),m(w)?0:w,!m(p),m(p)?0:p,!m(u),m(u)?0:u,M(_))}finally{I[P++]=void 0,I[P++]=void 0}}collidersWithAabbIntersectingAabb(t,e,r){try{c(t,h),c(e,h),jd(this.ptr,t.ptr,e.ptr,M(r))}finally{I[P++]=void 0}}}class Yt{static __wrap(t){const e=Object.create(Yt.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();Vd(t)}colliderHandle(){return jt(this.ptr)}normal(){const t=tl(this.ptr);return h.__wrap(t)}toi(){return el(this.ptr)}featureType(){return rl(this.ptr)>>>0}featureId(){try{const r=E(-16);nl(r,this.ptr);var t=v()[r/4+0],e=v()[r/4+1];return t===0?void 0:e>>>0}finally{E(16)}}}class Ne{static __wrap(t){const e=Object.create(Ne.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();il(t)}colliderHandle(){return jt(this.ptr)}toi(){return lt(this.ptr)}}class Kt{static __wrap(t){const e=Object.create(Kt.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();Zc(t)}normal(){const t=Qt(this.ptr);return h.__wrap(t)}toi(){return lt(this.ptr)}featureType(){return $c(this.ptr)>>>0}featureId(){try{const r=E(-16);Qc(r,this.ptr);var t=v()[r/4+0],e=v()[r/4+1];return t===0?void 0:e>>>0}finally{E(16)}}}class N{static __wrap(t){const e=Object.create(N.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();ko(t)}rbTranslation(t){const e=xs(this.ptr,t);return h.__wrap(e)}rbRotation(t){const e=Ns(this.ptr,t);return S.__wrap(e)}rbSleep(t){Ls(this.ptr,t)}rbIsSleeping(t){return Ds(this.ptr,t)!==0}rbIsMoving(t){return Os(this.ptr,t)!==0}rbNextTranslation(t){const e=Fs(this.ptr,t);return h.__wrap(e)}rbNextRotation(t){const e=zs(this.ptr,t);return S.__wrap(e)}rbSetTranslation(t,e,r,i,o){Hs(this.ptr,t,e,r,i,o)}rbSetRotation(t,e,r,i,o,a){Gs(this.ptr,t,e,r,i,o,a)}rbSetLinvel(t,e,r){c(e,h),ks(this.ptr,t,e.ptr,r)}rbSetAngvel(t,e,r){c(e,h),Bs(this.ptr,t,e.ptr,r)}rbSetNextKinematicTranslation(t,e,r,i){Vs(this.ptr,t,e,r,i)}rbSetNextKinematicRotation(t,e,r,i,o){Us(this.ptr,t,e,r,i,o)}rbRecomputeMassPropertiesFromColliders(t,e){c(e,x),Ws(this.ptr,t,e.ptr)}rbSetAdditionalMass(t,e,r){qs(this.ptr,t,e,r)}rbSetAdditionalMassProperties(t,e,r,i,o,a){c(r,h),c(i,h),c(o,S),Js(this.ptr,t,e,r.ptr,i.ptr,o.ptr,a)}rbLinvel(t){const e=Ys(this.ptr,t);return h.__wrap(e)}rbAngvel(t){const e=Ks(this.ptr,t);return h.__wrap(e)}rbLockTranslations(t,e,r){Xs(this.ptr,t,e,r)}rbSetEnabledTranslations(t,e,r,i,o){Zs(this.ptr,t,e,r,i,o)}rbLockRotations(t,e,r){$s(this.ptr,t,e,r)}rbSetEnabledRotations(t,e,r,i,o){Qs(this.ptr,t,e,r,i,o)}rbDominanceGroup(t){return to(this.ptr,t)}rbSetDominanceGroup(t,e){eo(this.ptr,t,e)}rbEnableCcd(t,e){ro(this.ptr,t,e)}rbMass(t){return no(this.ptr,t)}rbInvMass(t){return io(this.ptr,t)}rbEffectiveInvMass(t){const e=so(this.ptr,t);return h.__wrap(e)}rbLocalCom(t){const e=oo(this.ptr,t);return h.__wrap(e)}rbWorldCom(t){const e=ao(this.ptr,t);return h.__wrap(e)}rbInvPrincipalInertiaSqrt(t){const e=co(this.ptr,t);return h.__wrap(e)}rbPrincipalInertiaLocalFrame(t){const e=lo(this.ptr,t);return S.__wrap(e)}rbPrincipalInertia(t){const e=ho(this.ptr,t);return h.__wrap(e)}rbEffectiveWorldInvInertiaSqrt(t){const e=wo(this.ptr,t);return kt.__wrap(e)}rbEffectiveAngularInertia(t){const e=po(this.ptr,t);return kt.__wrap(e)}rbWakeUp(t){uo(this.ptr,t)}rbIsCcdEnabled(t){return _o(this.ptr,t)!==0}rbNumColliders(t){return fo(this.ptr,t)>>>0}rbCollider(t,e){return mo(this.ptr,t,e)}rbBodyType(t){return bo(this.ptr,t)>>>0}rbSetBodyType(t,e,r){yo(this.ptr,t,e,r)}rbIsFixed(t){return go(this.ptr,t)!==0}rbIsKinematic(t){return So(this.ptr,t)!==0}rbIsDynamic(t){return Ro(this.ptr,t)!==0}rbLinearDamping(t){return Eo(this.ptr,t)}rbAngularDamping(t){return Co(this.ptr,t)}rbSetLinearDamping(t,e){Io(this.ptr,t,e)}rbSetAngularDamping(t,e){Ao(this.ptr,t,e)}rbSetEnabled(t,e){To(this.ptr,t,e)}rbIsEnabled(t){return vo(this.ptr,t)!==0}rbGravityScale(t){return jo(this.ptr,t)}rbSetGravityScale(t,e,r){Po(this.ptr,t,e,r)}rbResetForces(t,e){Mo(this.ptr,t,e)}rbResetTorques(t,e){xo(this.ptr,t,e)}rbAddForce(t,e,r){c(e,h),No(this.ptr,t,e.ptr,r)}rbApplyImpulse(t,e,r){c(e,h),Lo(this.ptr,t,e.ptr,r)}rbAddTorque(t,e,r){c(e,h),Do(this.ptr,t,e.ptr,r)}rbApplyTorqueImpulse(t,e,r){c(e,h),Oo(this.ptr,t,e.ptr,r)}rbAddForceAtPoint(t,e,r,i){c(e,h),c(r,h),Fo(this.ptr,t,e.ptr,r.ptr,i)}rbApplyImpulseAtPoint(t,e,r,i){c(e,h),c(r,h),zo(this.ptr,t,e.ptr,r.ptr,i)}rbUserData(t){return Ho(this.ptr,t)>>>0}rbSetUserData(t,e){Go(this.ptr,t,e)}constructor(){const t=Bo();return N.__wrap(t)}createRigidBody(t,e,r,i,o,a,l,w,p,u,_,f,b,j,H,k,V,z,Y,ft,ie,se,oe,Nt){return c(e,h),c(r,S),c(l,h),c(w,h),c(p,h),c(u,h),c(_,S),Vo(this.ptr,t,e.ptr,r.ptr,i,o,a,l.ptr,w.ptr,p.ptr,u.ptr,_.ptr,f,b,j,H,k,V,z,Y,ft,ie,se,oe,Nt)}remove(t,e,r,i,o){c(e,Z),c(r,x),c(i,X),c(o,$),Uo(this.ptr,t,e.ptr,r.ptr,i.ptr,o.ptr)}len(){return Wo(this.ptr)>>>0}contains(t){return qo(this.ptr,t)!==0}forEachRigidBodyHandle(t){try{Jo(this.ptr,M(t))}finally{I[P++]=void 0}}propagateModifiedBodyPositionsToColliders(t){c(t,x),Yo(this.ptr,t.ptr)}}class S{static __wrap(t){const e=Object.create(S.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();Ud(t)}constructor(t,e,r,i){const o=Hl(t,e,r,i);return S.__wrap(o)}static identity(){const t=Gl();return S.__wrap(t)}get x(){return te(this.ptr)}get y(){return wr(this.ptr)}get z(){return lt(this.ptr)}get w(){return kl(this.ptr)}}class kt{static __wrap(t){const e=Object.create(kt.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();qd(t)}elements(){const t=Zl(this.ptr);return St(t)}}class Bt{static __wrap(t){const e=Object.create(Bt.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();Yd(t)}constructor(){const t=Jd();return Bt.__wrap(t)}serializeAll(t,e,r,i,o,a,l,w,p){c(t,h),c(e,it),c(r,Z),c(i,nt),c(o,tt),c(a,N),c(l,x),c(w,X),c(p,$);const u=Gd(this.ptr,t.ptr,e.ptr,r.ptr,i.ptr,o.ptr,a.ptr,l.ptr,w.ptr,p.ptr);return St(u)}deserializeAll(t){const e=kd(this.ptr,L(t));return e===0?void 0:xe.__wrap(e)}}class y{static __wrap(t){const e=Object.create(y.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();sl(t)}static cuboid(t,e,r){const i=ol(t,e,r);return y.__wrap(i)}static roundCuboid(t,e,r,i){const o=al(t,e,r,i);return y.__wrap(o)}static ball(t){const e=cl(t);return y.__wrap(e)}static halfspace(t){c(t,h);const e=ll(t.ptr);return y.__wrap(e)}static capsule(t,e){const r=dl(t,e);return y.__wrap(r)}static cylinder(t,e){const r=hl(t,e);return y.__wrap(r)}static roundCylinder(t,e,r){const i=wl(t,e,r);return y.__wrap(i)}static cone(t,e){const r=pl(t,e);return y.__wrap(r)}static roundCone(t,e,r){const i=ul(t,e,r);return y.__wrap(i)}static polyline(t,e){const r=at(t,U),i=G,o=Lt(e,U),l=_l(r,i,o,G);return y.__wrap(l)}static trimesh(t,e){const r=at(t,U),i=G,o=Lt(e,U),l=fl(r,i,o,G);return y.__wrap(l)}static heightfield(t,e,r,i){const o=at(r,U),a=G;c(i,h);const l=ml(t,e,o,a,i.ptr);return y.__wrap(l)}static segment(t,e){c(t,h),c(e,h);const r=bl(t.ptr,e.ptr);return y.__wrap(r)}static triangle(t,e,r){c(t,h),c(e,h),c(r,h);const i=yl(t.ptr,e.ptr,r.ptr);return y.__wrap(i)}static roundTriangle(t,e,r,i){c(t,h),c(e,h),c(r,h);const o=gl(t.ptr,e.ptr,r.ptr,i);return y.__wrap(o)}static convexHull(t){const e=at(t,U),i=Sl(e,G);return i===0?void 0:y.__wrap(i)}static roundConvexHull(t,e){const r=at(t,U),o=Rl(r,G,e);return o===0?void 0:y.__wrap(o)}static convexMesh(t,e){const r=at(t,U),i=G,o=Lt(e,U),l=El(r,i,o,G);return l===0?void 0:y.__wrap(l)}static roundConvexMesh(t,e,r){const i=at(t,U),o=G,a=Lt(e,U),w=Cl(i,o,a,G,r);return w===0?void 0:y.__wrap(w)}castShape(t,e,r,i,o,a,l,w,p){c(t,h),c(e,S),c(r,h),c(i,y),c(o,h),c(a,S),c(l,h);const u=Il(this.ptr,t.ptr,e.ptr,r.ptr,i.ptr,o.ptr,a.ptr,l.ptr,w,p);return u===0?void 0:Zt.__wrap(u)}intersectsShape(t,e,r,i,o){return c(t,h),c(e,S),c(r,y),c(i,h),c(o,S),Al(this.ptr,t.ptr,e.ptr,r.ptr,i.ptr,o.ptr)!==0}contactShape(t,e,r,i,o,a){c(t,h),c(e,S),c(r,y),c(i,h),c(o,S);const l=Tl(this.ptr,t.ptr,e.ptr,r.ptr,i.ptr,o.ptr,a);return l===0?void 0:It.__wrap(l)}containsPoint(t,e,r){return c(t,h),c(e,S),c(r,h),vl(this.ptr,t.ptr,e.ptr,r.ptr)!==0}projectPoint(t,e,r,i){c(t,h),c(e,S),c(r,h);const o=jl(this.ptr,t.ptr,e.ptr,r.ptr,i);return Jt.__wrap(o)}intersectsRay(t,e,r,i,o){return c(t,h),c(e,S),c(r,h),c(i,h),Pl(this.ptr,t.ptr,e.ptr,r.ptr,i.ptr,o)!==0}castRay(t,e,r,i,o,a){return c(t,h),c(e,S),c(r,h),c(i,h),Ml(this.ptr,t.ptr,e.ptr,r.ptr,i.ptr,o,a)}castRayAndGetNormal(t,e,r,i,o,a){c(t,h),c(e,S),c(r,h),c(i,h);const l=xl(this.ptr,t.ptr,e.ptr,r.ptr,i.ptr,o,a);return l===0?void 0:Kt.__wrap(l)}}class Xt{static __wrap(t){const e=Object.create(Xt.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();Fl(t)}colliderHandle(){return jt(this.ptr)}toi(){return lt(this.ptr)}witness1(){const t=Qt(this.ptr);return h.__wrap(t)}witness2(){const t=hr(this.ptr);return h.__wrap(t)}normal1(){const t=De(this.ptr);return h.__wrap(t)}normal2(){const t=zl(this.ptr);return h.__wrap(t)}}class It{static __wrap(t){const e=Object.create(It.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();pc(t)}distance(){return uc(this.ptr)}point1(){const t=$t(this.ptr);return h.__wrap(t)}point2(){const t=Qt(this.ptr);return h.__wrap(t)}normal1(){const t=hr(this.ptr);return h.__wrap(t)}normal2(){const t=De(this.ptr);return h.__wrap(t)}}class Zt{static __wrap(t){const e=Object.create(Zt.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();Nl(t)}toi(){return te(this.ptr)}witness1(){const t=Ll(this.ptr);return h.__wrap(t)}witness2(){const t=pr(this.ptr);return h.__wrap(t)}normal1(){const t=Dl(this.ptr);return h.__wrap(t)}normal2(){const t=Ol(this.ptr);return h.__wrap(t)}}class h{static __wrap(t){const e=Object.create(h.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();Wd(t)}static zero(){const t=Bl();return h.__wrap(t)}constructor(t,e,r){const i=Vl(t,e,r);return h.__wrap(i)}get x(){return te(this.ptr)}set x(t){lr(this.ptr,t)}get y(){return wr(this.ptr)}set y(t){Ul(this.ptr,t)}get z(){return lt(this.ptr)}set z(t){dr(this.ptr,t)}xyz(){const t=Wl(this.ptr);return h.__wrap(t)}yxz(){const t=ql(this.ptr);return h.__wrap(t)}zxy(){const t=Jl(this.ptr);return h.__wrap(t)}xzy(){const t=Yl(this.ptr);return h.__wrap(t)}yzx(){const t=Kl(this.ptr);return h.__wrap(t)}zyx(){const t=Xl(this.ptr);return h.__wrap(t)}}function fn(n){St(n)}function mn(n){return L(n)}function bn(n,t){const e=A(t),r=typeof e=="number"?e:void 0;Ot()[n/8+1]=m(r)?0:r,v()[n/4+0]=!m(r)}function yn(n){const t=A(n);return typeof t=="boolean"?t?1:0:2}function gn(n){return typeof A(n)=="function"}function Sn(n){const t=Yt.__wrap(n);return L(t)}function Rn(n){const t=je.__wrap(n);return L(t)}function En(){return ve(function(n,t,e){const r=A(n).call(A(t),A(e));return L(r)},arguments)}function Cn(){return ve(function(n,t,e,r){const i=A(n).call(A(t),A(e),A(r));return L(i)},arguments)}function In(){return ve(function(n,t,e,r,i){const o=A(n).call(A(t),A(e),A(r),A(i));return L(o)},arguments)}function An(n,t,e,r){const i=A(n).bind(A(t),A(e),A(r));return L(i)}function Tn(n){const t=A(n).buffer;return L(t)}function vn(n,t,e){const r=new Uint8Array(A(n),t>>>0,e>>>0);return L(r)}function jn(n){const t=new Uint8Array(A(n));return L(t)}function Pn(n,t,e){A(n).set(A(t),e>>>0)}function Mn(n){return A(n).length}function xn(n,t,e){const r=new Float32Array(A(n),t>>>0,e>>>0);return L(r)}function Nn(n,t,e){A(n).set(A(t),e>>>0)}function Ln(n){return A(n).length}function Dn(n){const t=new Float32Array(n>>>0);return L(t)}function On(n,t){throw new Error(ar(n,t))}function Fn(){return L(ut)}URL=globalThis.URL;const s=await dn({"./rapier_wasm3d_bg.js":{__wbindgen_object_drop_ref:fn,__wbindgen_number_new:mn,__wbindgen_number_get:bn,__wbindgen_boolean_get:yn,__wbindgen_is_function:gn,__wbg_rawraycolliderintersection_new:Sn,__wbg_rawcontactforceevent_new:Rn,__wbg_call_168da88779e35f61:En,__wbg_call_3999bee59e9f7719:Cn,__wbg_call_e1f72c051cdab859:In,__wbg_bind_10dfe70e95d2a480:An,__wbg_buffer_3f3d764d4747d564:Tn,__wbg_newwithbyteoffsetandlength_d9aa266703cb98be:vn,__wbg_new_8c3f0052272a457a:jn,__wbg_set_83db9690f9353e79:Pn,__wbg_length_9e1ae1900cb0fbd5:Mn,__wbg_newwithbyteoffsetandlength_be22e5fcf4f69ab4:xn,__wbg_set_0e0314cf6675c1b9:Nn,__wbg_length_9a2deed95d22668d:Ln,__wbg_newwithlength_a7168e4a1e8f5e12:Dn,__wbindgen_throw:On,__wbindgen_memory:Fn}},ln),ut=s.memory,zn=s.version,Hn=s.__wbg_rawkinematiccharactercontroller_free,Gn=s.rawkinematiccharactercontroller_new,kn=s.rawkinematiccharactercontroller_up,Bn=s.rawkinematiccharactercontroller_setUp,Vn=s.rawkinematiccharactercontroller_offset,Un=s.rawkinematiccharactercontroller_setOffset,Wn=s.rawkinematiccharactercontroller_slideEnabled,qn=s.rawkinematiccharactercontroller_setSlideEnabled,Jn=s.rawkinematiccharactercontroller_autostepMaxHeight,Yn=s.rawkinematiccharactercontroller_autostepMinWidth,Kn=s.rawkinematiccharactercontroller_autostepIncludesDynamicBodies,Xn=s.rawkinematiccharactercontroller_autostepEnabled,Zn=s.rawkinematiccharactercontroller_enableAutostep,$n=s.rawkinematiccharactercontroller_disableAutostep,Qn=s.rawkinematiccharactercontroller_maxSlopeClimbAngle,ti=s.rawkinematiccharactercontroller_setMaxSlopeClimbAngle,ei=s.rawkinematiccharactercontroller_minSlopeSlideAngle,ri=s.rawkinematiccharactercontroller_setMinSlopeSlideAngle,ni=s.rawkinematiccharactercontroller_snapToGroundDistance,ii=s.rawkinematiccharactercontroller_enableSnapToGround,si=s.rawkinematiccharactercontroller_disableSnapToGround,oi=s.rawkinematiccharactercontroller_snapToGroundEnabled,ai=s.rawkinematiccharactercontroller_computeColliderMovement,$t=s.rawkinematiccharactercontroller_computedMovement,Le=s.rawkinematiccharactercontroller_computedGrounded,ci=s.rawkinematiccharactercontroller_numComputedCollisions,li=s.rawkinematiccharactercontroller_computedCollision,di=s.__wbg_rawcharactercollision_free,hi=s.rawcharactercollision_new,jt=s.rawcharactercollision_handle,wi=s.rawcharactercollision_translationApplied,pi=s.rawcharactercollision_translationRemaining,lt=s.rawcharactercollision_toi,Qt=s.rawcharactercollision_worldWitness1,ui=s.rawcharactercollision_worldWitness2,De=s.rawcharactercollision_worldNormal1,_i=s.rawcharactercollision_worldNormal2,fi=s.__wbg_rawccdsolver_free,mi=s.rawccdsolver_new,bi=s.rawimpulsejointset_jointType,yi=s.rawimpulsejointset_jointBodyHandle1,gi=s.rawimpulsejointset_jointBodyHandle2,Si=s.rawimpulsejointset_jointFrameX1,Ri=s.rawimpulsejointset_jointFrameX2,Ei=s.rawimpulsejointset_jointAnchor1,Ci=s.rawimpulsejointset_jointAnchor2,Ii=s.rawimpulsejointset_jointSetAnchor1,Ai=s.rawimpulsejointset_jointSetAnchor2,Ti=s.rawimpulsejointset_jointContactsEnabled,vi=s.rawimpulsejointset_jointSetContactsEnabled,ji=s.rawimpulsejointset_jointLimitsEnabled,Pi=s.rawimpulsejointset_jointLimitsMin,Mi=s.rawimpulsejointset_jointLimitsMax,xi=s.rawimpulsejointset_jointSetLimits,Ni=s.rawimpulsejointset_jointConfigureMotorModel,Li=s.rawimpulsejointset_jointConfigureMotorVelocity,Di=s.rawimpulsejointset_jointConfigureMotorPosition,Oi=s.rawimpulsejointset_jointConfigureMotor,Fi=s.__wbg_rawimpulsejointset_free,zi=s.rawimpulsejointset_new,Hi=s.rawimpulsejointset_createJoint,Gi=s.rawimpulsejointset_remove,ki=s.rawimpulsejointset_len,Bi=s.rawimpulsejointset_contains,Vi=s.rawimpulsejointset_forEachJointHandle,Ui=s.rawimpulsejointset_forEachJointAttachedToRigidBody,Wi=s.__wbg_rawintegrationparameters_free,qi=s.rawintegrationparameters_new,te=s.rawintegrationparameters_dt,Ji=s.rawintegrationparameters_allowedLinearError,Yi=s.rawintegrationparameters_predictionDistance,Ki=s.rawintegrationparameters_maxVelocityIterations,Xi=s.rawintegrationparameters_maxVelocityFrictionIterations,Zi=s.rawintegrationparameters_maxStabilizationIterations,$i=s.rawintegrationparameters_minIslandSize,Qi=s.rawintegrationparameters_maxCcdSubsteps,lr=s.rawintegrationparameters_set_dt,dr=s.rawintegrationparameters_set_erp,ts=s.rawintegrationparameters_set_allowedLinearError,es=s.rawintegrationparameters_set_predictionDistance,rs=s.rawintegrationparameters_set_maxVelocityIterations,ns=s.rawintegrationparameters_set_maxVelocityFrictionIterations,is=s.rawintegrationparameters_set_maxStabilizationIterations,ss=s.rawintegrationparameters_set_minIslandSize,os=s.rawintegrationparameters_set_maxCcdSubsteps,as=s.__wbg_rawislandmanager_free,cs=s.rawislandmanager_new,ls=s.rawislandmanager_forEachActiveRigidBodyHandle,ds=s.__wbg_rawgenericjoint_free,hs=s.rawgenericjoint_spherical,ws=s.rawgenericjoint_prismatic,ps=s.rawgenericjoint_fixed,us=s.rawgenericjoint_revolute,_s=s.rawmultibodyjointset_jointType,fs=s.rawmultibodyjointset_jointFrameX1,ms=s.rawmultibodyjointset_jointFrameX2,bs=s.rawmultibodyjointset_jointAnchor1,ys=s.rawmultibodyjointset_jointAnchor2,gs=s.rawmultibodyjointset_jointContactsEnabled,Ss=s.rawmultibodyjointset_jointSetContactsEnabled,Rs=s.rawmultibodyjointset_jointLimitsEnabled,Es=s.rawmultibodyjointset_jointLimitsMin,Cs=s.rawmultibodyjointset_jointLimitsMax,Is=s.__wbg_rawmultibodyjointset_free,As=s.rawmultibodyjointset_new,Ts=s.rawmultibodyjointset_createJoint,vs=s.rawmultibodyjointset_remove,js=s.rawmultibodyjointset_contains,Ps=s.rawmultibodyjointset_forEachJointHandle,Ms=s.rawmultibodyjointset_forEachJointAttachedToRigidBody,xs=s.rawrigidbodyset_rbTranslation,Ns=s.rawrigidbodyset_rbRotation,Ls=s.rawrigidbodyset_rbSleep,Ds=s.rawrigidbodyset_rbIsSleeping,Os=s.rawrigidbodyset_rbIsMoving,Fs=s.rawrigidbodyset_rbNextTranslation,zs=s.rawrigidbodyset_rbNextRotation,Hs=s.rawrigidbodyset_rbSetTranslation,Gs=s.rawrigidbodyset_rbSetRotation,ks=s.rawrigidbodyset_rbSetLinvel,Bs=s.rawrigidbodyset_rbSetAngvel,Vs=s.rawrigidbodyset_rbSetNextKinematicTranslation,Us=s.rawrigidbodyset_rbSetNextKinematicRotation,Ws=s.rawrigidbodyset_rbRecomputeMassPropertiesFromColliders,qs=s.rawrigidbodyset_rbSetAdditionalMass,Js=s.rawrigidbodyset_rbSetAdditionalMassProperties,Ys=s.rawrigidbodyset_rbLinvel,Ks=s.rawrigidbodyset_rbAngvel,Xs=s.rawrigidbodyset_rbLockTranslations,Zs=s.rawrigidbodyset_rbSetEnabledTranslations,$s=s.rawrigidbodyset_rbLockRotations,Qs=s.rawrigidbodyset_rbSetEnabledRotations,to=s.rawrigidbodyset_rbDominanceGroup,eo=s.rawrigidbodyset_rbSetDominanceGroup,ro=s.rawrigidbodyset_rbEnableCcd,no=s.rawrigidbodyset_rbMass,io=s.rawrigidbodyset_rbInvMass,so=s.rawrigidbodyset_rbEffectiveInvMass,oo=s.rawrigidbodyset_rbLocalCom,ao=s.rawrigidbodyset_rbWorldCom,co=s.rawrigidbodyset_rbInvPrincipalInertiaSqrt,lo=s.rawrigidbodyset_rbPrincipalInertiaLocalFrame,ho=s.rawrigidbodyset_rbPrincipalInertia,wo=s.rawrigidbodyset_rbEffectiveWorldInvInertiaSqrt,po=s.rawrigidbodyset_rbEffectiveAngularInertia,uo=s.rawrigidbodyset_rbWakeUp,_o=s.rawrigidbodyset_rbIsCcdEnabled,fo=s.rawrigidbodyset_rbNumColliders,mo=s.rawrigidbodyset_rbCollider,bo=s.rawrigidbodyset_rbBodyType,yo=s.rawrigidbodyset_rbSetBodyType,go=s.rawrigidbodyset_rbIsFixed,So=s.rawrigidbodyset_rbIsKinematic,Ro=s.rawrigidbodyset_rbIsDynamic,Eo=s.rawrigidbodyset_rbLinearDamping,Co=s.rawrigidbodyset_rbAngularDamping,Io=s.rawrigidbodyset_rbSetLinearDamping,Ao=s.rawrigidbodyset_rbSetAngularDamping,To=s.rawrigidbodyset_rbSetEnabled,vo=s.rawrigidbodyset_rbIsEnabled,jo=s.rawrigidbodyset_rbGravityScale,Po=s.rawrigidbodyset_rbSetGravityScale,Mo=s.rawrigidbodyset_rbResetForces,xo=s.rawrigidbodyset_rbResetTorques,No=s.rawrigidbodyset_rbAddForce,Lo=s.rawrigidbodyset_rbApplyImpulse,Do=s.rawrigidbodyset_rbAddTorque,Oo=s.rawrigidbodyset_rbApplyTorqueImpulse,Fo=s.rawrigidbodyset_rbAddForceAtPoint,zo=s.rawrigidbodyset_rbApplyImpulseAtPoint,Ho=s.rawrigidbodyset_rbUserData,Go=s.rawrigidbodyset_rbSetUserData,ko=s.__wbg_rawrigidbodyset_free,Bo=s.rawrigidbodyset_new,Vo=s.rawrigidbodyset_createRigidBody,Uo=s.rawrigidbodyset_remove,Wo=s.rawrigidbodyset_len,qo=s.rawrigidbodyset_contains,Jo=s.rawrigidbodyset_forEachRigidBodyHandle,Yo=s.rawrigidbodyset_propagateModifiedBodyPositionsToColliders,Ko=s.__wbg_rawbroadphase_free,Xo=s.rawbroadphase_new,Zo=s.rawcolliderset_coTranslation,$o=s.rawcolliderset_coRotation,Qo=s.rawcolliderset_coSetTranslation,ta=s.rawcolliderset_coSetTranslationWrtParent,ea=s.rawcolliderset_coSetRotation,ra=s.rawcolliderset_coSetRotationWrtParent,na=s.rawcolliderset_coIsSensor,ia=s.rawcolliderset_coShapeType,sa=s.rawcolliderset_coHalfspaceNormal,oa=s.rawcolliderset_coHalfExtents,aa=s.rawcolliderset_coSetHalfExtents,ca=s.rawcolliderset_coRadius,la=s.rawcolliderset_coSetRadius,da=s.rawcolliderset_coHalfHeight,ha=s.rawcolliderset_coSetHalfHeight,wa=s.rawcolliderset_coRoundRadius,pa=s.rawcolliderset_coSetRoundRadius,ua=s.rawcolliderset_coVertices,_a=s.rawcolliderset_coIndices,fa=s.rawcolliderset_coHeightfieldHeights,ma=s.rawcolliderset_coHeightfieldScale,ba=s.rawcolliderset_coHeightfieldNRows,ya=s.rawcolliderset_coHeightfieldNCols,ga=s.rawcolliderset_coParent,Sa=s.rawcolliderset_coSetEnabled,Ra=s.rawcolliderset_coIsEnabled,Ea=s.rawcolliderset_coFriction,Ca=s.rawcolliderset_coRestitution,Ia=s.rawcolliderset_coDensity,Aa=s.rawcolliderset_coMass,Ta=s.rawcolliderset_coVolume,va=s.rawcolliderset_coCollisionGroups,ja=s.rawcolliderset_coSolverGroups,Pa=s.rawcolliderset_coActiveHooks,Ma=s.rawcolliderset_coActiveCollisionTypes,xa=s.rawcolliderset_coActiveEvents,Na=s.rawcolliderset_coContactForceEventThreshold,La=s.rawcolliderset_coContainsPoint,Da=s.rawcolliderset_coCastShape,Oa=s.rawcolliderset_coCastCollider,Fa=s.rawcolliderset_coIntersectsShape,za=s.rawcolliderset_coContactShape,Ha=s.rawcolliderset_coContactCollider,Ga=s.rawcolliderset_coProjectPoint,ka=s.rawcolliderset_coIntersectsRay,Ba=s.rawcolliderset_coCastRay,Va=s.rawcolliderset_coCastRayAndGetNormal,Ua=s.rawcolliderset_coSetSensor,Wa=s.rawcolliderset_coSetRestitution,qa=s.rawcolliderset_coSetFriction,Ja=s.rawcolliderset_coFrictionCombineRule,Ya=s.rawcolliderset_coSetFrictionCombineRule,Ka=s.rawcolliderset_coRestitutionCombineRule,Xa=s.rawcolliderset_coSetRestitutionCombineRule,Za=s.rawcolliderset_coSetCollisionGroups,$a=s.rawcolliderset_coSetSolverGroups,Qa=s.rawcolliderset_coSetActiveHooks,tc=s.rawcolliderset_coSetActiveEvents,ec=s.rawcolliderset_coSetActiveCollisionTypes,rc=s.rawcolliderset_coSetShape,nc=s.rawcolliderset_coSetContactForceEventThreshold,ic=s.rawcolliderset_coSetDensity,sc=s.rawcolliderset_coSetMass,oc=s.rawcolliderset_coSetMassProperties,ac=s.__wbg_rawcolliderset_free,cc=s.rawcolliderset_new,lc=s.rawcolliderset_len,er=s.rawcolliderset_contains,dc=s.rawcolliderset_createCollider,hc=s.rawcolliderset_remove,wc=s.rawcolliderset_forEachColliderHandle,pc=s.__wbg_rawshapecontact_free,uc=s.rawshapecontact_distance,_c=s.__wbg_rawnarrowphase_free,fc=s.rawnarrowphase_new,mc=s.rawnarrowphase_contacts_with,bc=s.rawnarrowphase_contact_pair,yc=s.rawnarrowphase_intersections_with,gc=s.rawnarrowphase_intersection_pair,Sc=s.__wbg_rawcontactmanifold_free,Rc=s.rawcontactpair_collider1,Ec=s.rawcontactpair_collider2,Cc=s.rawcontactpair_numContactManifolds,Ic=s.rawcontactpair_contactManifold,Ac=s.rawcontactmanifold_normal,Tc=s.rawcontactmanifold_local_n1,vc=s.rawcontactmanifold_local_n2,jc=s.rawcontactmanifold_subshape1,Pc=s.rawcontactmanifold_subshape2,Mc=s.rawcontactmanifold_num_contacts,xc=s.rawcontactmanifold_contact_local_p1,Nc=s.rawcontactmanifold_contact_local_p2,Lc=s.rawcontactmanifold_contact_dist,Dc=s.rawcontactmanifold_contact_fid1,Oc=s.rawcontactmanifold_contact_fid2,Fc=s.rawcontactmanifold_contact_impulse,zc=s.rawcontactmanifold_contact_tangent_impulse_x,Hc=s.rawcontactmanifold_contact_tangent_impulse_y,Gc=s.rawcontactmanifold_num_solver_contacts,kc=s.rawcontactmanifold_solver_contact_point,Bc=s.rawcontactmanifold_solver_contact_dist,Vc=s.rawcontactmanifold_solver_contact_friction,Uc=s.rawcontactmanifold_solver_contact_restitution,Wc=s.rawcontactmanifold_solver_contact_tangent_velocity,qc=s.__wbg_rawpointprojection_free,Jc=s.__wbg_rawpointcolliderprojection_free,Yc=s.rawpointcolliderprojection_colliderHandle,Kc=s.rawpointcolliderprojection_featureType,Xc=s.rawpointcolliderprojection_featureId,Zc=s.__wbg_rawrayintersection_free,$c=s.rawrayintersection_featureType,Qc=s.rawrayintersection_featureId,tl=s.rawraycolliderintersection_normal,el=s.rawraycolliderintersection_toi,rl=s.rawraycolliderintersection_featureType,nl=s.rawraycolliderintersection_featureId,il=s.__wbg_rawraycollidertoi_free,sl=s.__wbg_rawshape_free,ol=s.rawshape_cuboid,al=s.rawshape_roundCuboid,cl=s.rawshape_ball,ll=s.rawshape_halfspace,dl=s.rawshape_capsule,hl=s.rawshape_cylinder,wl=s.rawshape_roundCylinder,pl=s.rawshape_cone,ul=s.rawshape_roundCone,_l=s.rawshape_polyline,fl=s.rawshape_trimesh,ml=s.rawshape_heightfield,bl=s.rawshape_segment,yl=s.rawshape_triangle,gl=s.rawshape_roundTriangle,Sl=s.rawshape_convexHull,Rl=s.rawshape_roundConvexHull,El=s.rawshape_convexMesh,Cl=s.rawshape_roundConvexMesh,Il=s.rawshape_castShape,Al=s.rawshape_intersectsShape,Tl=s.rawshape_contactShape,vl=s.rawshape_containsPoint,jl=s.rawshape_projectPoint,Pl=s.rawshape_intersectsRay,Ml=s.rawshape_castRay,xl=s.rawshape_castRayAndGetNormal,Nl=s.__wbg_rawshapetoi_free,Ll=s.rawshapetoi_witness1,Dl=s.rawshapetoi_normal1,Ol=s.rawshapetoi_normal2,Fl=s.__wbg_rawshapecollidertoi_free,hr=s.rawshapecollidertoi_witness2,zl=s.rawshapecollidertoi_normal2,Hl=s.rawrotation_new,Gl=s.rawrotation_identity,wr=s.rawrotation_y,kl=s.rawrotation_w,Bl=s.rawvector_zero,Vl=s.rawvector_new,Ul=s.rawvector_set_y,Wl=s.rawvector_xyz,ql=s.rawvector_yxz,Jl=s.rawvector_zxy,Yl=s.rawvector_xzy,Kl=s.rawvector_yzx,Xl=s.rawvector_zyx,Zl=s.rawsdpmatrix3_elements,$l=s.__wbg_rawdebugrenderpipeline_free,Ql=s.rawdebugrenderpipeline_new,td=s.rawdebugrenderpipeline_vertices,ed=s.rawdebugrenderpipeline_colors,rd=s.rawdebugrenderpipeline_render,nd=s.__wbg_raweventqueue_free,id=s.__wbg_rawcontactforceevent_free,sd=s.rawcontactforceevent_collider2,pr=s.rawcontactforceevent_total_force,od=s.rawcontactforceevent_total_force_magnitude,ad=s.rawcontactforceevent_max_force_direction,cd=s.rawcontactforceevent_max_force_magnitude,ld=s.raweventqueue_new,dd=s.raweventqueue_drainCollisionEvents,hd=s.raweventqueue_drainContactForceEvents,wd=s.raweventqueue_clear,pd=s.__wbg_rawphysicspipeline_free,ud=s.rawphysicspipeline_new,_d=s.rawphysicspipeline_step,fd=s.rawphysicspipeline_stepWithEvents,md=s.__wbg_rawquerypipeline_free,bd=s.rawquerypipeline_new,yd=s.rawquerypipeline_update,gd=s.rawquerypipeline_castRay,Sd=s.rawquerypipeline_castRayAndGetNormal,Rd=s.rawquerypipeline_intersectionsWithRay,Ed=s.rawquerypipeline_intersectionWithShape,Cd=s.rawquerypipeline_projectPoint,Id=s.rawquerypipeline_projectPointAndGetFeature,Ad=s.rawquerypipeline_intersectionsWithPoint,Td=s.rawquerypipeline_castShape,vd=s.rawquerypipeline_intersectionsWithShape,jd=s.rawquerypipeline_collidersWithAabbIntersectingAabb,Pd=s.__wbg_rawdeserializedworld_free,Md=s.rawdeserializedworld_takeGravity,xd=s.rawdeserializedworld_takeIntegrationParameters,Nd=s.rawdeserializedworld_takeIslandManager,Ld=s.rawdeserializedworld_takeBroadPhase,Dd=s.rawdeserializedworld_takeNarrowPhase,Od=s.rawdeserializedworld_takeBodies,Fd=s.rawdeserializedworld_takeColliders,zd=s.rawdeserializedworld_takeImpulseJoints,Hd=s.rawdeserializedworld_takeMultibodyJoints,Gd=s.rawserializationpipeline_serializeAll,kd=s.rawserializationpipeline_deserializeAll,Bd=s.__wbg_rawcontactpair_free,Vd=s.__wbg_rawraycolliderintersection_free,Ud=s.__wbg_rawrotation_free,Wd=s.__wbg_rawvector_free,qd=s.__wbg_rawsdpmatrix3_free;s.rawvector_set_x;s.rawvector_set_z;s.rawpointprojection_isInside;s.rawpointcolliderprojection_isInside;s.rawcolliderset_isHandleValid;s.rawshapecontact_point1;s.rawshapecontact_point2;s.rawshapecontact_normal2;s.rawpointprojection_point;s.rawpointcolliderprojection_point;s.rawrayintersection_normal;s.rawshapecollidertoi_witness1;s.rawshapecontact_normal1;s.rawshapecollidertoi_normal1;s.rawshapetoi_witness2;const Jd=s.rawserializationpipeline_new;s.rawintegrationparameters_erp;s.rawrayintersection_toi;s.rawraycollidertoi_toi;s.rawshapetoi_toi;s.rawshapecollidertoi_toi;s.rawrotation_x;s.rawrotation_z;s.rawvector_x;s.rawvector_y;s.rawvector_z;s.rawraycolliderintersection_colliderHandle;s.rawraycollidertoi_colliderHandle;s.rawshapecollidertoi_colliderHandle;s.rawcontactforceevent_collider1;const Yd=s.__wbg_rawserializationpipeline_free,E=s.__wbindgen_add_to_stack_pointer,Dt=s.__wbindgen_free,U=s.__wbindgen_malloc,Kd=s.__wbindgen_exn_store;class ur{constructor(t,e,r){this.x=t,this.y=e,this.z=r}}class d{static new(t,e,r){return new ur(t,e,r)}static intoRaw(t){return new h(t.x,t.y,t.z)}static zeros(){return d.new(0,0,0)}static fromRaw(t){if(!t)return null;let e=d.new(t.x,t.y,t.z);return t.free(),e}static copy(t,e){t.x=e.x,t.y=e.y,t.z=e.z}}class ue{constructor(t,e,r,i){this.x=t,this.y=e,this.z=r,this.w=i}}class g{static identity(){return new ue(0,0,0,1)}static fromRaw(t){if(!t)return null;let e=new ue(t.x,t.y,t.z,t.w);return t.free(),e}static intoRaw(t){return new S(t.x,t.y,t.z,t.w)}static copy(t,e){t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w}}class _r{constructor(t){this.elements=t}get m11(){return this.elements[0]}get m12(){return this.elements[1]}get m21(){return this.m12}get m13(){return this.elements[2]}get m31(){return this.m13}get m22(){return this.elements[3]}get m23(){return this.elements[4]}get m32(){return this.m23}get m33(){return this.elements[5]}}class _e{static fromRaw(t){const e=new _r(t.elements());return t.free(),e}}var W;(function(n){n[n.Dynamic=0]="Dynamic",n[n.Fixed=1]="Fixed",n[n.KinematicPositionBased=2]="KinematicPositionBased",n[n.KinematicVelocityBased=3]="KinematicVelocityBased"})(W||(W={}));class fe{constructor(t,e,r){this.rawSet=t,this.colliderSet=e,this.handle=r}finalizeDeserialization(t){this.colliderSet=t}isValid(){return this.rawSet.contains(this.handle)}lockTranslations(t,e){return this.rawSet.rbLockTranslations(this.handle,t,e)}lockRotations(t,e){return this.rawSet.rbLockRotations(this.handle,t,e)}setEnabledTranslations(t,e,r,i){return this.rawSet.rbSetEnabledTranslations(this.handle,t,e,r,i)}restrictTranslations(t,e,r,i){this.setEnabledTranslations(t,e,r,i)}setEnabledRotations(t,e,r,i){return this.rawSet.rbSetEnabledRotations(this.handle,t,e,r,i)}restrictRotations(t,e,r,i){this.setEnabledRotations(t,e,r,i)}dominanceGroup(){return this.rawSet.rbDominanceGroup(this.handle)}setDominanceGroup(t){this.rawSet.rbSetDominanceGroup(this.handle,t)}enableCcd(t){this.rawSet.rbEnableCcd(this.handle,t)}translation(){let t=this.rawSet.rbTranslation(this.handle);return d.fromRaw(t)}rotation(){let t=this.rawSet.rbRotation(this.handle);return g.fromRaw(t)}nextTranslation(){let t=this.rawSet.rbNextTranslation(this.handle);return d.fromRaw(t)}nextRotation(){let t=this.rawSet.rbNextRotation(this.handle);return g.fromRaw(t)}setTranslation(t,e){this.rawSet.rbSetTranslation(this.handle,t.x,t.y,t.z,e)}setLinvel(t,e){let r=d.intoRaw(t);this.rawSet.rbSetLinvel(this.handle,r,e),r.free()}gravityScale(){return this.rawSet.rbGravityScale(this.handle)}setGravityScale(t,e){this.rawSet.rbSetGravityScale(this.handle,t,e)}setRotation(t,e){this.rawSet.rbSetRotation(this.handle,t.x,t.y,t.z,t.w,e)}setAngvel(t,e){let r=d.intoRaw(t);this.rawSet.rbSetAngvel(this.handle,r,e),r.free()}setNextKinematicTranslation(t){this.rawSet.rbSetNextKinematicTranslation(this.handle,t.x,t.y,t.z)}setNextKinematicRotation(t){this.rawSet.rbSetNextKinematicRotation(this.handle,t.x,t.y,t.z,t.w)}linvel(){return d.fromRaw(this.rawSet.rbLinvel(this.handle))}angvel(){return d.fromRaw(this.rawSet.rbAngvel(this.handle))}mass(){return this.rawSet.rbMass(this.handle)}effectiveInvMass(){return d.fromRaw(this.rawSet.rbEffectiveInvMass(this.handle))}invMass(){return this.rawSet.rbInvMass(this.handle)}localCom(){return d.fromRaw(this.rawSet.rbLocalCom(this.handle))}worldCom(){return d.fromRaw(this.rawSet.rbWorldCom(this.handle))}invPrincipalInertiaSqrt(){return d.fromRaw(this.rawSet.rbInvPrincipalInertiaSqrt(this.handle))}principalInertia(){return d.fromRaw(this.rawSet.rbPrincipalInertia(this.handle))}principalInertiaLocalFrame(){return g.fromRaw(this.rawSet.rbPrincipalInertiaLocalFrame(this.handle))}effectiveWorldInvInertiaSqrt(){return _e.fromRaw(this.rawSet.rbEffectiveWorldInvInertiaSqrt(this.handle))}effectiveAngularInertia(){return _e.fromRaw(this.rawSet.rbEffectiveAngularInertia(this.handle))}sleep(){this.rawSet.rbSleep(this.handle)}wakeUp(){this.rawSet.rbWakeUp(this.handle)}isCcdEnabled(){return this.rawSet.rbIsCcdEnabled(this.handle)}numColliders(){return this.rawSet.rbNumColliders(this.handle)}collider(t){return this.colliderSet.get(this.rawSet.rbCollider(this.handle,t))}setEnabled(t){this.rawSet.rbSetEnabled(this.handle,t)}isEnabled(){return this.rawSet.rbIsEnabled(this.handle)}bodyType(){return this.rawSet.rbBodyType(this.handle)}setBodyType(t,e){return this.rawSet.rbSetBodyType(this.handle,t,e)}isSleeping(){return this.rawSet.rbIsSleeping(this.handle)}isMoving(){return this.rawSet.rbIsMoving(this.handle)}isFixed(){return this.rawSet.rbIsFixed(this.handle)}isKinematic(){return this.rawSet.rbIsKinematic(this.handle)}isDynamic(){return this.rawSet.rbIsDynamic(this.handle)}linearDamping(){return this.rawSet.rbLinearDamping(this.handle)}angularDamping(){return this.rawSet.rbAngularDamping(this.handle)}setLinearDamping(t){this.rawSet.rbSetLinearDamping(this.handle,t)}recomputeMassPropertiesFromColliders(){this.rawSet.rbRecomputeMassPropertiesFromColliders(this.handle,this.colliderSet.raw)}setAdditionalMass(t,e){this.rawSet.rbSetAdditionalMass(this.handle,t,e)}setAdditionalMassProperties(t,e,r,i,o){let a=d.intoRaw(e),l=d.intoRaw(r),w=g.intoRaw(i);this.rawSet.rbSetAdditionalMassProperties(this.handle,t,a,l,w,o),a.free(),l.free(),w.free()}setAngularDamping(t){this.rawSet.rbSetAngularDamping(this.handle,t)}resetForces(t){this.rawSet.rbResetForces(this.handle,t)}resetTorques(t){this.rawSet.rbResetTorques(this.handle,t)}addForce(t,e){const r=d.intoRaw(t);this.rawSet.rbAddForce(this.handle,r,e),r.free()}applyImpulse(t,e){const r=d.intoRaw(t);this.rawSet.rbApplyImpulse(this.handle,r,e),r.free()}addTorque(t,e){const r=d.intoRaw(t);this.rawSet.rbAddTorque(this.handle,r,e),r.free()}applyTorqueImpulse(t,e){const r=d.intoRaw(t);this.rawSet.rbApplyTorqueImpulse(this.handle,r,e),r.free()}addForceAtPoint(t,e,r){const i=d.intoRaw(t),o=d.intoRaw(e);this.rawSet.rbAddForceAtPoint(this.handle,i,o,r),i.free(),o.free()}applyImpulseAtPoint(t,e,r){const i=d.intoRaw(t),o=d.intoRaw(e);this.rawSet.rbApplyImpulseAtPoint(this.handle,i,o,r),i.free(),o.free()}}class K{constructor(t){this.enabled=!0,this.status=t,this.translation=d.zeros(),this.rotation=g.identity(),this.gravityScale=1,this.linvel=d.zeros(),this.mass=0,this.massOnly=!1,this.centerOfMass=d.zeros(),this.translationsEnabledX=!0,this.translationsEnabledY=!0,this.angvel=d.zeros(),this.principalAngularInertia=d.zeros(),this.angularInertiaLocalFrame=g.identity(),this.translationsEnabledZ=!0,this.rotationsEnabledX=!0,this.rotationsEnabledY=!0,this.rotationsEnabledZ=!0,this.linearDamping=0,this.angularDamping=0,this.canSleep=!0,this.sleeping=!1,this.ccdEnabled=!1,this.dominanceGroup=0}static dynamic(){return new K(W.Dynamic)}static kinematicPositionBased(){return new K(W.KinematicPositionBased)}static kinematicVelocityBased(){return new K(W.KinematicVelocityBased)}static fixed(){return new K(W.Fixed)}static newDynamic(){return new K(W.Dynamic)}static newKinematicPositionBased(){return new K(W.KinematicPositionBased)}static newKinematicVelocityBased(){return new K(W.KinematicVelocityBased)}static newStatic(){return new K(W.Fixed)}setDominanceGroup(t){return this.dominanceGroup=t,this}setEnabled(t){return this.enabled=t,this}setTranslation(t,e,r){if(typeof t!="number"||typeof e!="number"||typeof r!="number")throw TypeError("The translation components must be numbers.");return this.translation={x:t,y:e,z:r},this}setRotation(t){return g.copy(this.rotation,t),this}setGravityScale(t){return this.gravityScale=t,this}setAdditionalMass(t){return this.mass=t,this.massOnly=!0,this}setLinvel(t,e,r){if(typeof t!="number"||typeof e!="number"||typeof r!="number")throw TypeError("The linvel components must be numbers.");return this.linvel={x:t,y:e,z:r},this}setAngvel(t){return d.copy(this.angvel,t),this}setAdditionalMassProperties(t,e,r,i){return this.mass=t,d.copy(this.centerOfMass,e),d.copy(this.principalAngularInertia,r),g.copy(this.angularInertiaLocalFrame,i),this.massOnly=!1,this}enabledTranslations(t,e,r){return this.translationsEnabledX=t,this.translationsEnabledY=e,this.translationsEnabledZ=r,this}restrictTranslations(t,e,r){return this.enabledTranslations(t,e,r)}lockTranslations(){return this.enabledTranslations(!1,!1,!1)}enabledRotations(t,e,r){return this.rotationsEnabledX=t,this.rotationsEnabledY=e,this.rotationsEnabledZ=r,this}restrictRotations(t,e,r){return this.enabledRotations(t,e,r)}lockRotations(){return this.restrictRotations(!1,!1,!1)}setLinearDamping(t){return this.linearDamping=t,this}setAngularDamping(t){return this.angularDamping=t,this}setCanSleep(t){return this.canSleep=t,this}setSleeping(t){return this.sleeping=t,this}setCcdEnabled(t){return this.ccdEnabled=t,this}setUserData(t){return this.userData=t,this}}class ee{constructor(){this.fconv=new Float64Array(1),this.uconv=new Uint32Array(this.fconv.buffer),this.data=new Array,this.size=0}set(t,e){let r=this.index(t);for(;this.data.length<=r;)this.data.push(null);this.data[r]==null&&(this.size+=1),this.data[r]=e}len(){return this.size}delete(t){let e=this.index(t);e<this.data.length&&(this.data[e]!=null&&(this.size-=1),this.data[e]=null)}clear(){this.data=new Array}get(t){let e=this.index(t);return e<this.data.length?this.data[e]:null}forEach(t){for(const e of this.data)e!=null&&t(e)}getAll(){return this.data.filter(t=>t!=null)}index(t){return this.fconv[0]=t,this.uconv[0]}}class fr{constructor(t){this.raw=t||new N,this.map=new ee,t&&t.forEachRigidBodyHandle(e=>{this.map.set(e,new fe(t,null,e))})}free(){this.raw&&this.raw.free(),this.raw=void 0,this.map&&this.map.clear(),this.map=void 0}finalizeDeserialization(t){this.map.forEach(e=>e.finalizeDeserialization(t))}createRigidBody(t,e){let r=d.intoRaw(e.translation),i=g.intoRaw(e.rotation),o=d.intoRaw(e.linvel),a=d.intoRaw(e.centerOfMass),l=d.intoRaw(e.angvel),w=d.intoRaw(e.principalAngularInertia),p=g.intoRaw(e.angularInertiaLocalFrame),u=this.raw.createRigidBody(e.enabled,r,i,e.gravityScale,e.mass,e.massOnly,a,o,l,w,p,e.translationsEnabledX,e.translationsEnabledY,e.translationsEnabledZ,e.rotationsEnabledX,e.rotationsEnabledY,e.rotationsEnabledZ,e.linearDamping,e.angularDamping,e.status,e.canSleep,e.sleeping,e.ccdEnabled,e.dominanceGroup);r.free(),i.free(),o.free(),a.free(),l.free(),w.free(),p.free();const _=new fe(this.raw,t,u);return _.userData=e.userData,this.map.set(u,_),_}remove(t,e,r,i,o){for(let a=0;a<this.raw.rbNumColliders(t);a+=1)r.unmap(this.raw.rbCollider(t,a));i.forEachJointHandleAttachedToRigidBody(t,a=>i.unmap(a)),o.forEachJointHandleAttachedToRigidBody(t,a=>o.unmap(a)),this.raw.remove(t,e.raw,r.raw,i.raw,o.raw),this.map.delete(t)}len(){return this.map.len()}contains(t){return this.get(t)!=null}get(t){return this.map.get(t)}forEach(t){this.map.forEach(t)}forEachActiveRigidBody(t,e){t.forEachActiveRigidBodyHandle(r=>{e(this.get(r))})}getAll(){return this.map.getAll()}}class mr{constructor(t){this.raw=t||new it}free(){this.raw&&this.raw.free(),this.raw=void 0}get dt(){return this.raw.dt}get erp(){return this.raw.erp}get allowedLinearError(){return this.raw.allowedLinearError}get predictionDistance(){return this.raw.predictionDistance}get maxVelocityIterations(){return this.raw.maxVelocityIterations}get maxVelocityFrictionIterations(){return this.raw.maxVelocityFrictionIterations}get maxStabilizationIterations(){return this.raw.maxStabilizationIterations}get minIslandSize(){return this.raw.minIslandSize}get maxCcdSubsteps(){return this.raw.maxCcdSubsteps}set dt(t){this.raw.dt=t}set erp(t){this.raw.erp=t}set allowedLinearError(t){this.raw.allowedLinearError=t}set predictionDistance(t){this.raw.predictionDistance=t}set maxVelocityIterations(t){this.raw.maxVelocityIterations=t}set maxVelocityFrictionIterations(t){this.raw.maxVelocityFrictionIterations=t}set maxStabilizationIterations(t){this.raw.maxStabilizationIterations=t}set minIslandSize(t){this.raw.minIslandSize=t}set maxCcdSubsteps(t){this.raw.maxCcdSubsteps=t}}var D;(function(n){n[n.Revolute=0]="Revolute",n[n.Fixed=1]="Fixed",n[n.Prismatic=2]="Prismatic",n[n.Spherical=3]="Spherical"})(D||(D={}));var me;(function(n){n[n.AccelerationBased=0]="AccelerationBased",n[n.ForceBased=1]="ForceBased"})(me||(me={}));class st{constructor(t,e,r){this.rawSet=t,this.bodySet=e,this.handle=r}static newTyped(t,e,r){switch(t.jointType(r)){case D.Revolute:return new gr(t,e,r);case D.Prismatic:return new yr(t,e,r);case D.Fixed:return new br(t,e,r);case D.Spherical:return new Sr(t,e,r);default:return new st(t,e,r)}}finalizeDeserialization(t){this.bodySet=t}isValid(){return this.rawSet.contains(this.handle)}body1(){return this.bodySet.get(this.rawSet.jointBodyHandle1(this.handle))}body2(){return this.bodySet.get(this.rawSet.jointBodyHandle2(this.handle))}type(){return this.rawSet.jointType(this.handle)}frameX1(){return g.fromRaw(this.rawSet.jointFrameX1(this.handle))}frameX2(){return g.fromRaw(this.rawSet.jointFrameX2(this.handle))}anchor1(){return d.fromRaw(this.rawSet.jointAnchor1(this.handle))}anchor2(){return d.fromRaw(this.rawSet.jointAnchor2(this.handle))}setAnchor1(t){const e=d.intoRaw(t);this.rawSet.jointSetAnchor1(this.handle,e),e.free()}setAnchor2(t){const e=d.intoRaw(t);this.rawSet.jointSetAnchor2(this.handle,e),e.free()}setContactsEnabled(t){this.rawSet.jointSetContactsEnabled(this.handle,t)}contactsEnabled(){return this.rawSet.jointContactsEnabled(this.handle)}}class Oe extends st{limitsEnabled(){return this.rawSet.jointLimitsEnabled(this.handle,this.rawAxis())}limitsMin(){return this.rawSet.jointLimitsMin(this.handle,this.rawAxis())}limitsMax(){return this.rawSet.jointLimitsMax(this.handle,this.rawAxis())}setLimits(t,e){this.rawSet.jointSetLimits(this.handle,this.rawAxis(),t,e)}configureMotorModel(t){this.rawSet.jointConfigureMotorModel(this.handle,this.rawAxis(),t)}configureMotorVelocity(t,e){this.rawSet.jointConfigureMotorVelocity(this.handle,this.rawAxis(),t,e)}configureMotorPosition(t,e,r){this.rawSet.jointConfigureMotorPosition(this.handle,this.rawAxis(),t,e,r)}configureMotor(t,e,r,i){this.rawSet.jointConfigureMotor(this.handle,this.rawAxis(),t,e,r,i)}}class br extends st{}class yr extends Oe{rawAxis(){return qt.X}}class gr extends Oe{rawAxis(){return qt.AngX}}class Sr extends st{}class dt{constructor(){}static fixed(t,e,r,i){let o=new dt;return o.anchor1=t,o.anchor2=r,o.frame1=e,o.frame2=i,o.jointType=D.Fixed,o}static spherical(t,e){let r=new dt;return r.anchor1=t,r.anchor2=e,r.jointType=D.Spherical,r}static prismatic(t,e,r){let i=new dt;return i.anchor1=t,i.anchor2=e,i.axis=r,i.jointType=D.Prismatic,i}static revolute(t,e,r){let i=new dt;return i.anchor1=t,i.anchor2=e,i.axis=r,i.jointType=D.Revolute,i}intoRaw(){let t=d.intoRaw(this.anchor1),e=d.intoRaw(this.anchor2),r,i,o=!1,a=0,l=0;switch(this.jointType){case D.Fixed:let w=g.intoRaw(this.frame1),p=g.intoRaw(this.frame2);i=B.fixed(t,w,e,p),w.free(),p.free();break;case D.Prismatic:r=d.intoRaw(this.axis),this.limitsEnabled&&(o=!0,a=this.limits[0],l=this.limits[1]),i=B.prismatic(t,e,r,o,a,l),r.free();break;case D.Spherical:i=B.spherical(t,e);break;case D.Revolute:r=d.intoRaw(this.axis),i=B.revolute(t,e,r),r.free();break}return t.free(),e.free(),i}}class Rr{constructor(t){this.raw=t||new X,this.map=new ee,t&&t.forEachJointHandle(e=>{this.map.set(e,st.newTyped(t,null,e))})}free(){this.raw&&this.raw.free(),this.raw=void 0,this.map&&this.map.clear(),this.map=void 0}finalizeDeserialization(t){this.map.forEach(e=>e.finalizeDeserialization(t))}createJoint(t,e,r,i,o){const a=e.intoRaw(),l=this.raw.createJoint(a,r,i,o);a.free();let w=st.newTyped(this.raw,t,l);return this.map.set(l,w),w}remove(t,e){this.raw.remove(t,e),this.unmap(t)}forEachJointHandleAttachedToRigidBody(t,e){this.raw.forEachJointAttachedToRigidBody(t,e)}unmap(t){this.map.delete(t)}len(){return this.map.len()}contains(t){return this.get(t)!=null}get(t){return this.map.get(t)}forEach(t){this.map.forEach(t)}getAll(){return this.map.getAll()}}class ot{constructor(t,e){this.rawSet=t,this.handle=e}static newTyped(t,e){switch(t.jointType(e)){case D.Revolute:return new Ir(t,e);case D.Prismatic:return new Cr(t,e);case D.Fixed:return new Er(t,e);case D.Spherical:return new Ar(t,e);default:return new ot(t,e)}}isValid(){return this.rawSet.contains(this.handle)}setContactsEnabled(t){this.rawSet.jointSetContactsEnabled(this.handle,t)}contactsEnabled(){return this.rawSet.jointContactsEnabled(this.handle)}}class Fe extends ot{}class Er extends ot{}class Cr extends Fe{rawAxis(){return qt.X}}class Ir extends Fe{rawAxis(){return qt.AngX}}class Ar extends ot{}class Tr{constructor(t){this.raw=t||new $,this.map=new ee,t&&t.forEachJointHandle(e=>{this.map.set(e,ot.newTyped(this.raw,e))})}free(){this.raw&&this.raw.free(),this.raw=void 0,this.map&&this.map.clear(),this.map=void 0}createJoint(t,e,r,i){const o=t.intoRaw(),a=this.raw.createJoint(o,e,r,i);o.free();let l=ot.newTyped(this.raw,a);return this.map.set(a,l),l}remove(t,e){this.raw.remove(t,e),this.map.delete(t)}unmap(t){this.map.delete(t)}len(){return this.map.len()}contains(t){return this.get(t)!=null}get(t){return this.map.get(t)}forEach(t){this.map.forEach(t)}forEachJointHandleAttachedToRigidBody(t,e){this.raw.forEachJointAttachedToRigidBody(t,e)}getAll(){return this.map.getAll()}}var At;(function(n){n[n.Average=0]="Average",n[n.Min=1]="Min",n[n.Multiply=2]="Multiply",n[n.Max=3]="Max"})(At||(At={}));class vr{constructor(t){this.raw=t||new ht}free(){this.raw&&this.raw.free(),this.raw=void 0}}class jr{constructor(t){this.raw=t||new Z}free(){this.raw&&this.raw.free(),this.raw=void 0}forEachActiveRigidBodyHandle(t){this.raw.forEachActiveRigidBodyHandle(t)}}class Pr{constructor(t){this.raw=t||new nt}free(){this.raw&&this.raw.free(),this.raw=void 0}}class Mr{constructor(t){this.raw=t||new tt,this.tempManifold=new xr(null)}free(){this.raw&&this.raw.free(),this.raw=void 0}contactsWith(t,e){this.raw.contacts_with(t,e)}intersectionsWith(t,e){this.raw.intersections_with(t,e)}contactPair(t,e,r){const i=this.raw.contact_pair(t,e);if(i){const o=i.collider1()!=t;let a;for(a=0;a<i.numContactManifolds();++a)this.tempManifold.raw=i.contactManifold(a),this.tempManifold.raw&&r(this.tempManifold,o),this.tempManifold.free();i.free()}}intersectionPair(t,e){return this.raw.intersection_pair(t,e)}}class xr{constructor(t){this.raw=t}free(){this.raw&&this.raw.free(),this.raw=void 0}normal(){return d.fromRaw(this.raw.normal())}localNormal1(){return d.fromRaw(this.raw.local_n1())}localNormal2(){return d.fromRaw(this.raw.local_n2())}subshape1(){return this.raw.subshape1()}subshape2(){return this.raw.subshape2()}numContacts(){return this.raw.num_contacts()}localContactPoint1(t){return d.fromRaw(this.raw.contact_local_p1(t))}localContactPoint2(t){return d.fromRaw(this.raw.contact_local_p2(t))}contactDist(t){return this.raw.contact_dist(t)}contactFid1(t){return this.raw.contact_fid1(t)}contactFid2(t){return this.raw.contact_fid2(t)}contactImpulse(t){return this.raw.contact_impulse(t)}contactTangentImpulseX(t){return this.raw.contact_tangent_impulse_x(t)}contactTangentImpulseY(t){return this.raw.contact_tangent_impulse_y(t)}numSolverContacts(){return this.raw.num_solver_contacts()}solverContactPoint(t){return d.fromRaw(this.raw.solver_contact_point(t))}solverContactDist(t){return this.raw.solver_contact_dist(t)}solverContactFriction(t){return this.raw.solver_contact_friction(t)}solverContactRestitution(t){return this.raw.solver_contact_restitution(t)}solverContactTangentVelocity(t){return d.fromRaw(this.raw.solver_contact_tangent_velocity(t))}}class wt{constructor(t,e,r,i,o){this.distance=t,this.point1=e,this.point2=r,this.normal1=i,this.normal2=o}static fromRaw(t){if(!t)return null;const e=new wt(t.distance(),d.fromRaw(t.point1()),d.fromRaw(t.point2()),d.fromRaw(t.normal1()),d.fromRaw(t.normal2()));return t.free(),e}}var pt;(function(n){n[n.Vertex=0]="Vertex",n[n.Edge=1]="Edge",n[n.Face=2]="Face",n[n.Unknown=3]="Unknown"})(pt||(pt={}));class Pt{constructor(t,e){this.point=t,this.isInside=e}static fromRaw(t){if(!t)return null;const e=new Pt(d.fromRaw(t.point()),t.isInside());return t.free(),e}}class Tt{constructor(t,e,r,i,o){this.featureType=pt.Unknown,this.featureId=void 0,this.collider=t,this.point=e,this.isInside=r,o!==void 0&&(this.featureId=o),i!==void 0&&(this.featureType=i)}static fromRaw(t,e){if(!e)return null;const r=new Tt(t.get(e.colliderHandle()),d.fromRaw(e.point()),e.isInside(),e.featureType(),e.featureId());return e.free(),r}}class Xd{constructor(t,e){this.origin=t,this.dir=e}pointAt(t){return{x:this.origin.x+this.dir.x*t,y:this.origin.y+this.dir.y*t,z:this.origin.z+this.dir.z*t}}}class Mt{constructor(t,e,r,i){this.featureType=pt.Unknown,this.featureId=void 0,this.toi=t,this.normal=e,i!==void 0&&(this.featureId=i),r!==void 0&&(this.featureType=r)}static fromRaw(t){if(!t)return null;const e=new Mt(t.toi(),d.fromRaw(t.normal()),t.featureType(),t.featureId());return t.free(),e}}class vt{constructor(t,e,r,i,o){this.featureType=pt.Unknown,this.featureId=void 0,this.collider=t,this.toi=e,this.normal=r,o!==void 0&&(this.featureId=o),i!==void 0&&(this.featureType=i)}static fromRaw(t,e){if(!e)return null;const r=new vt(t.get(e.colliderHandle()),e.toi(),d.fromRaw(e.normal()),e.featureType(),e.featureId());return e.free(),r}}class re{constructor(t,e){this.collider=t,this.toi=e}static fromRaw(t,e){if(!e)return null;const r=new re(t.get(e.colliderHandle()),e.toi());return e.free(),r}}class _t{constructor(t,e,r,i,o){this.toi=t,this.witness1=e,this.witness2=r,this.normal1=i,this.normal2=o}static fromRaw(t,e){if(!e)return null;const r=new _t(e.toi(),d.fromRaw(e.witness1()),d.fromRaw(e.witness2()),d.fromRaw(e.normal1()),d.fromRaw(e.normal2()));return e.free(),r}}class xt extends _t{constructor(t,e,r,i,o,a){super(e,r,i,o,a),this.collider=t}static fromRaw(t,e){if(!e)return null;const r=new xt(t.get(e.colliderHandle()),e.toi(),d.fromRaw(e.witness1()),d.fromRaw(e.witness2()),d.fromRaw(e.normal1()),d.fromRaw(e.normal2()));return e.free(),r}}class O{static fromRaw(t,e){const r=t.coShapeType(e);let i,o,a,l,w,p,u;switch(r){case R.Ball:return new ze(t.coRadius(e));case R.Cuboid:return i=t.coHalfExtents(e),new He(i.x,i.y,i.z);case R.RoundCuboid:return i=t.coHalfExtents(e),o=t.coRoundRadius(e),new Ge(i.x,i.y,i.z,o);case R.Capsule:return w=t.coHalfHeight(e),p=t.coRadius(e),new ke(w,p);case R.Segment:return a=t.coVertices(e),new Be(d.new(a[0],a[1],a[2]),d.new(a[3],a[4],a[5]));case R.Polyline:return a=t.coVertices(e),l=t.coIndices(e),new We(a,l);case R.Triangle:return a=t.coVertices(e),new Ve(d.new(a[0],a[1],a[2]),d.new(a[3],a[4],a[5]),d.new(a[6],a[7],a[8]));case R.RoundTriangle:return a=t.coVertices(e),o=t.coRoundRadius(e),new Ue(d.new(a[0],a[1],a[2]),d.new(a[3],a[4],a[5]),d.new(a[6],a[7],a[8]),o);case R.HalfSpace:return u=d.fromRaw(t.coHalfspaceNormal(e)),new Nr(u);case R.TriMesh:return a=t.coVertices(e),l=t.coIndices(e),new qe(a,l);case R.HeightField:const _=t.coHeightfieldScale(e),f=t.coHeightfieldHeights(e),b=t.coHeightfieldNRows(e),j=t.coHeightfieldNCols(e);return new Je(b,j,f,_);case R.ConvexPolyhedron:return a=t.coVertices(e),l=t.coIndices(e),new Vt(a,l);case R.RoundConvexPolyhedron:return a=t.coVertices(e),l=t.coIndices(e),o=t.coRoundRadius(e),new Ut(a,l,o);case R.Cylinder:return w=t.coHalfHeight(e),p=t.coRadius(e),new Ye(w,p);case R.RoundCylinder:return w=t.coHalfHeight(e),p=t.coRadius(e),o=t.coRoundRadius(e),new Ke(w,p,o);case R.Cone:return w=t.coHalfHeight(e),p=t.coRadius(e),new Xe(w,p);case R.RoundCone:return w=t.coHalfHeight(e),p=t.coRadius(e),o=t.coRoundRadius(e),new Ze(w,p,o);default:throw new Error("unknown shape type: "+r)}}castShape(t,e,r,i,o,a,l,w,p){let u=d.intoRaw(t),_=g.intoRaw(e),f=d.intoRaw(r),b=d.intoRaw(o),j=g.intoRaw(a),H=d.intoRaw(l),k=this.intoRaw(),V=i.intoRaw(),z=_t.fromRaw(null,k.castShape(u,_,f,V,b,j,H,w,p));return u.free(),_.free(),f.free(),b.free(),j.free(),H.free(),k.free(),V.free(),z}intersectsShape(t,e,r,i,o){let a=d.intoRaw(t),l=g.intoRaw(e),w=d.intoRaw(i),p=g.intoRaw(o),u=this.intoRaw(),_=r.intoRaw(),f=u.intersectsShape(a,l,_,w,p);return a.free(),l.free(),w.free(),p.free(),u.free(),_.free(),f}contactShape(t,e,r,i,o,a){let l=d.intoRaw(t),w=g.intoRaw(e),p=d.intoRaw(i),u=g.intoRaw(o),_=this.intoRaw(),f=r.intoRaw(),b=wt.fromRaw(_.contactShape(l,w,f,p,u,a));return l.free(),w.free(),p.free(),u.free(),_.free(),f.free(),b}containsPoint(t,e,r){let i=d.intoRaw(t),o=g.intoRaw(e),a=d.intoRaw(r),l=this.intoRaw(),w=l.containsPoint(i,o,a);return i.free(),o.free(),a.free(),l.free(),w}projectPoint(t,e,r,i){let o=d.intoRaw(t),a=g.intoRaw(e),l=d.intoRaw(r),w=this.intoRaw(),p=Pt.fromRaw(w.projectPoint(o,a,l,i));return o.free(),a.free(),l.free(),w.free(),p}intersectsRay(t,e,r,i){let o=d.intoRaw(e),a=g.intoRaw(r),l=d.intoRaw(t.origin),w=d.intoRaw(t.dir),p=this.intoRaw(),u=p.intersectsRay(o,a,l,w,i);return o.free(),a.free(),l.free(),w.free(),p.free(),u}castRay(t,e,r,i,o){let a=d.intoRaw(e),l=g.intoRaw(r),w=d.intoRaw(t.origin),p=d.intoRaw(t.dir),u=this.intoRaw(),_=u.castRay(a,l,w,p,i,o);return a.free(),l.free(),w.free(),p.free(),u.free(),_}castRayAndGetNormal(t,e,r,i,o){let a=d.intoRaw(e),l=g.intoRaw(r),w=d.intoRaw(t.origin),p=d.intoRaw(t.dir),u=this.intoRaw(),_=Mt.fromRaw(u.castRayAndGetNormal(a,l,w,p,i,o));return a.free(),l.free(),w.free(),p.free(),u.free(),_}}var R;(function(n){n[n.Ball=0]="Ball",n[n.Cuboid=1]="Cuboid",n[n.Capsule=2]="Capsule",n[n.Segment=3]="Segment",n[n.Polyline=4]="Polyline",n[n.Triangle=5]="Triangle",n[n.TriMesh=6]="TriMesh",n[n.HeightField=7]="HeightField",n[n.ConvexPolyhedron=9]="ConvexPolyhedron",n[n.Cylinder=10]="Cylinder",n[n.Cone=11]="Cone",n[n.RoundCuboid=12]="RoundCuboid",n[n.RoundTriangle=13]="RoundTriangle",n[n.RoundCylinder=14]="RoundCylinder",n[n.RoundCone=15]="RoundCone",n[n.RoundConvexPolyhedron=16]="RoundConvexPolyhedron",n[n.HalfSpace=17]="HalfSpace"})(R||(R={}));class ze extends O{constructor(t){super(),this.type=R.Ball,this.radius=t}intoRaw(){return y.ball(this.radius)}}class Nr extends O{constructor(t){super(),this.type=R.HalfSpace,this.normal=t}intoRaw(){let t=d.intoRaw(this.normal),e=y.halfspace(t);return t.free(),e}}class He extends O{constructor(t,e,r){super(),this.type=R.Cuboid,this.halfExtents=d.new(t,e,r)}intoRaw(){return y.cuboid(this.halfExtents.x,this.halfExtents.y,this.halfExtents.z)}}class Ge extends O{constructor(t,e,r,i){super(),this.type=R.RoundCuboid,this.halfExtents=d.new(t,e,r),this.borderRadius=i}intoRaw(){return y.roundCuboid(this.halfExtents.x,this.halfExtents.y,this.halfExtents.z,this.borderRadius)}}class ke extends O{constructor(t,e){super(),this.type=R.Capsule,this.halfHeight=t,this.radius=e}intoRaw(){return y.capsule(this.halfHeight,this.radius)}}class Be extends O{constructor(t,e){super(),this.type=R.Segment,this.a=t,this.b=e}intoRaw(){let t=d.intoRaw(this.a),e=d.intoRaw(this.b),r=y.segment(t,e);return t.free(),e.free(),r}}class Ve extends O{constructor(t,e,r){super(),this.type=R.Triangle,this.a=t,this.b=e,this.c=r}intoRaw(){let t=d.intoRaw(this.a),e=d.intoRaw(this.b),r=d.intoRaw(this.c),i=y.triangle(t,e,r);return t.free(),e.free(),r.free(),i}}class Ue extends O{constructor(t,e,r,i){super(),this.type=R.RoundTriangle,this.a=t,this.b=e,this.c=r,this.borderRadius=i}intoRaw(){let t=d.intoRaw(this.a),e=d.intoRaw(this.b),r=d.intoRaw(this.c),i=y.roundTriangle(t,e,r,this.borderRadius);return t.free(),e.free(),r.free(),i}}class We extends O{constructor(t,e){super(),this.type=R.Polyline,this.vertices=t,this.indices=e??new Uint32Array(0)}intoRaw(){return y.polyline(this.vertices,this.indices)}}class qe extends O{constructor(t,e){super(),this.type=R.TriMesh,this.vertices=t,this.indices=e}intoRaw(){return y.trimesh(this.vertices,this.indices)}}class Vt extends O{constructor(t,e){super(),this.type=R.ConvexPolyhedron,this.vertices=t,this.indices=e}intoRaw(){return this.indices?y.convexMesh(this.vertices,this.indices):y.convexHull(this.vertices)}}class Ut extends O{constructor(t,e,r){super(),this.type=R.RoundConvexPolyhedron,this.vertices=t,this.indices=e,this.borderRadius=r}intoRaw(){return this.indices?y.roundConvexMesh(this.vertices,this.indices,this.borderRadius):y.roundConvexHull(this.vertices,this.borderRadius)}}class Je extends O{constructor(t,e,r,i){super(),this.type=R.HeightField,this.nrows=t,this.ncols=e,this.heights=r,this.scale=i}intoRaw(){let t=d.intoRaw(this.scale),e=y.heightfield(this.nrows,this.ncols,this.heights,t);return t.free(),e}}class Ye extends O{constructor(t,e){super(),this.type=R.Cylinder,this.halfHeight=t,this.radius=e}intoRaw(){return y.cylinder(this.halfHeight,this.radius)}}class Ke extends O{constructor(t,e,r){super(),this.type=R.RoundCylinder,this.borderRadius=r,this.halfHeight=t,this.radius=e}intoRaw(){return y.roundCylinder(this.halfHeight,this.radius,this.borderRadius)}}class Xe extends O{constructor(t,e){super(),this.type=R.Cone,this.halfHeight=t,this.radius=e}intoRaw(){return y.cone(this.halfHeight,this.radius)}}class Ze extends O{constructor(t,e,r){super(),this.type=R.RoundCone,this.halfHeight=t,this.radius=e,this.borderRadius=r}intoRaw(){return y.roundCone(this.halfHeight,this.radius,this.borderRadius)}}var Wt;(function(n){n[n.DYNAMIC_DYNAMIC=1]="DYNAMIC_DYNAMIC",n[n.DYNAMIC_KINEMATIC=12]="DYNAMIC_KINEMATIC",n[n.DYNAMIC_FIXED=2]="DYNAMIC_FIXED",n[n.KINEMATIC_KINEMATIC=52224]="KINEMATIC_KINEMATIC",n[n.KINEMATIC_FIXED=8704]="KINEMATIC_FIXED",n[n.FIXED_FIXED=32]="FIXED_FIXED",n[n.DEFAULT=15]="DEFAULT",n[n.ALL=60943]="ALL"})(Wt||(Wt={}));class be{constructor(t,e,r,i){this.colliderSet=t,this.handle=e,this._parent=r,this._shape=i}finalizeDeserialization(t){this.handle!=null&&(this._parent=t.get(this.colliderSet.raw.coParent(this.handle)))}ensureShapeIsCached(){this._shape||(this._shape=O.fromRaw(this.colliderSet.raw,this.handle))}get shape(){return this.ensureShapeIsCached(),this._shape}isValid(){return this.colliderSet.raw.contains(this.handle)}translation(){return d.fromRaw(this.colliderSet.raw.coTranslation(this.handle))}rotation(){return g.fromRaw(this.colliderSet.raw.coRotation(this.handle))}isSensor(){return this.colliderSet.raw.coIsSensor(this.handle)}setSensor(t){this.colliderSet.raw.coSetSensor(this.handle,t)}setShape(t){let e=t.intoRaw();this.colliderSet.raw.coSetShape(this.handle,e),e.free(),this._shape=t}setEnabled(t){this.colliderSet.raw.coSetEnabled(this.handle,t)}isEnabled(){return this.colliderSet.raw.coIsEnabled(this.handle)}setRestitution(t){this.colliderSet.raw.coSetRestitution(this.handle,t)}setFriction(t){this.colliderSet.raw.coSetFriction(this.handle,t)}frictionCombineRule(){return this.colliderSet.raw.coFrictionCombineRule(this.handle)}setFrictionCombineRule(t){this.colliderSet.raw.coSetFrictionCombineRule(this.handle,t)}restitutionCombineRule(){return this.colliderSet.raw.coRestitutionCombineRule(this.handle)}setRestitutionCombineRule(t){this.colliderSet.raw.coSetRestitutionCombineRule(this.handle,t)}setCollisionGroups(t){this.colliderSet.raw.coSetCollisionGroups(this.handle,t)}setSolverGroups(t){this.colliderSet.raw.coSetSolverGroups(this.handle,t)}activeHooks(){return this.colliderSet.raw.coActiveHooks(this.handle)}setActiveHooks(t){this.colliderSet.raw.coSetActiveHooks(this.handle,t)}activeEvents(){return this.colliderSet.raw.coActiveEvents(this.handle)}setActiveEvents(t){this.colliderSet.raw.coSetActiveEvents(this.handle,t)}activeCollisionTypes(){return this.colliderSet.raw.coActiveCollisionTypes(this.handle)}setContactForceEventThreshold(t){return this.colliderSet.raw.coSetContactForceEventThreshold(this.handle,t)}contactForceEventThreshold(){return this.colliderSet.raw.coContactForceEventThreshold(this.handle)}setActiveCollisionTypes(t){this.colliderSet.raw.coSetActiveCollisionTypes(this.handle,t)}setDensity(t){this.colliderSet.raw.coSetDensity(this.handle,t)}setMass(t){this.colliderSet.raw.coSetMass(this.handle,t)}setMassProperties(t,e,r,i){let o=d.intoRaw(e),a=d.intoRaw(r),l=g.intoRaw(i);this.colliderSet.raw.coSetMassProperties(this.handle,t,o,a,l),o.free(),a.free(),l.free()}setTranslation(t){this.colliderSet.raw.coSetTranslation(this.handle,t.x,t.y,t.z)}setTranslationWrtParent(t){this.colliderSet.raw.coSetTranslationWrtParent(this.handle,t.x,t.y,t.z)}setRotation(t){this.colliderSet.raw.coSetRotation(this.handle,t.x,t.y,t.z,t.w)}setRotationWrtParent(t){this.colliderSet.raw.coSetRotationWrtParent(this.handle,t.x,t.y,t.z,t.w)}shapeType(){return this.colliderSet.raw.coShapeType(this.handle)}halfExtents(){return d.fromRaw(this.colliderSet.raw.coHalfExtents(this.handle))}setHalfExtents(t){const e=d.intoRaw(t);this.colliderSet.raw.coSetHalfExtents(this.handle,e)}radius(){return this.colliderSet.raw.coRadius(this.handle)}setRadius(t){this.colliderSet.raw.coSetRadius(this.handle,t)}roundRadius(){return this.colliderSet.raw.coRoundRadius(this.handle)}setRoundRadius(t){this.colliderSet.raw.coSetRoundRadius(this.handle,t)}halfHeight(){return this.colliderSet.raw.coHalfHeight(this.handle)}setHalfHeight(t){this.colliderSet.raw.coSetHalfHeight(this.handle,t)}vertices(){return this.colliderSet.raw.coVertices(this.handle)}indices(){return this.colliderSet.raw.coIndices(this.handle)}heightfieldHeights(){return this.colliderSet.raw.coHeightfieldHeights(this.handle)}heightfieldScale(){let t=this.colliderSet.raw.coHeightfieldScale(this.handle);return d.fromRaw(t)}heightfieldNRows(){return this.colliderSet.raw.coHeightfieldNRows(this.handle)}heightfieldNCols(){return this.colliderSet.raw.coHeightfieldNCols(this.handle)}parent(){return this._parent}friction(){return this.colliderSet.raw.coFriction(this.handle)}restitution(){return this.colliderSet.raw.coRestitution(this.handle)}density(){return this.colliderSet.raw.coDensity(this.handle)}mass(){return this.colliderSet.raw.coMass(this.handle)}volume(){return this.colliderSet.raw.coVolume(this.handle)}collisionGroups(){return this.colliderSet.raw.coCollisionGroups(this.handle)}solverGroups(){return this.colliderSet.raw.coSolverGroups(this.handle)}containsPoint(t){let e=d.intoRaw(t),r=this.colliderSet.raw.coContainsPoint(this.handle,e);return e.free(),r}projectPoint(t,e){let r=d.intoRaw(t),i=Pt.fromRaw(this.colliderSet.raw.coProjectPoint(this.handle,r,e));return r.free(),i}intersectsRay(t,e){let r=d.intoRaw(t.origin),i=d.intoRaw(t.dir),o=this.colliderSet.raw.coIntersectsRay(this.handle,r,i,e);return r.free(),i.free(),o}castShape(t,e,r,i,o,a,l){let w=d.intoRaw(t),p=d.intoRaw(r),u=g.intoRaw(i),_=d.intoRaw(o),f=e.intoRaw(),b=_t.fromRaw(this.colliderSet,this.colliderSet.raw.coCastShape(this.handle,w,f,p,u,_,a,l));return w.free(),p.free(),u.free(),_.free(),f.free(),b}castCollider(t,e,r,i,o){let a=d.intoRaw(t),l=d.intoRaw(r),w=xt.fromRaw(this.colliderSet,this.colliderSet.raw.coCastCollider(this.handle,a,e.handle,l,i,o));return a.free(),l.free(),w}intersectsShape(t,e,r){let i=d.intoRaw(e),o=g.intoRaw(r),a=t.intoRaw(),l=this.colliderSet.raw.coIntersectsShape(this.handle,a,i,o);return i.free(),o.free(),a.free(),l}contactShape(t,e,r,i){let o=d.intoRaw(e),a=g.intoRaw(r),l=t.intoRaw(),w=wt.fromRaw(this.colliderSet.raw.coContactShape(this.handle,l,o,a,i));return o.free(),a.free(),l.free(),w}contactCollider(t,e){return wt.fromRaw(this.colliderSet.raw.coContactCollider(this.handle,t.handle,e))}castRay(t,e,r){let i=d.intoRaw(t.origin),o=d.intoRaw(t.dir),a=this.colliderSet.raw.coCastRay(this.handle,i,o,e,r);return i.free(),o.free(),a}castRayAndGetNormal(t,e,r){let i=d.intoRaw(t.origin),o=d.intoRaw(t.dir),a=Mt.fromRaw(this.colliderSet.raw.coCastRayAndGetNormal(this.handle,i,o,e,r));return i.free(),o.free(),a}}var ct;(function(n){n[n.Density=0]="Density",n[n.Mass=1]="Mass",n[n.MassProps=2]="MassProps"})(ct||(ct={}));class T{constructor(t){this.enabled=!0,this.shape=t,this.massPropsMode=ct.Density,this.density=1,this.friction=.5,this.restitution=0,this.rotation=g.identity(),this.translation=d.zeros(),this.isSensor=!1,this.collisionGroups=4294967295,this.solverGroups=4294967295,this.frictionCombineRule=At.Average,this.restitutionCombineRule=At.Average,this.activeCollisionTypes=Wt.DEFAULT,this.activeEvents=0,this.activeHooks=0,this.mass=0,this.centerOfMass=d.zeros(),this.contactForceEventThreshold=0,this.principalAngularInertia=d.zeros(),this.angularInertiaLocalFrame=g.identity()}static ball(t){const e=new ze(t);return new T(e)}static capsule(t,e){const r=new ke(t,e);return new T(r)}static segment(t,e){const r=new Be(t,e);return new T(r)}static triangle(t,e,r){const i=new Ve(t,e,r);return new T(i)}static roundTriangle(t,e,r,i){const o=new Ue(t,e,r,i);return new T(o)}static polyline(t,e){const r=new We(t,e);return new T(r)}static trimesh(t,e){const r=new qe(t,e);return new T(r)}static cuboid(t,e,r){const i=new He(t,e,r);return new T(i)}static roundCuboid(t,e,r,i){const o=new Ge(t,e,r,i);return new T(o)}static heightfield(t,e,r,i){const o=new Je(t,e,r,i);return new T(o)}static cylinder(t,e){const r=new Ye(t,e);return new T(r)}static roundCylinder(t,e,r){const i=new Ke(t,e,r);return new T(i)}static cone(t,e){const r=new Xe(t,e);return new T(r)}static roundCone(t,e,r){const i=new Ze(t,e,r);return new T(i)}static convexHull(t){const e=new Vt(t,null);return new T(e)}static convexMesh(t,e){const r=new Vt(t,e);return new T(r)}static roundConvexHull(t,e){const r=new Ut(t,null,e);return new T(r)}static roundConvexMesh(t,e,r){const i=new Ut(t,e,r);return new T(i)}setTranslation(t,e,r){if(typeof t!="number"||typeof e!="number"||typeof r!="number")throw TypeError("The translation components must be numbers.");return this.translation={x:t,y:e,z:r},this}setRotation(t){return g.copy(this.rotation,t),this}setSensor(t){return this.isSensor=t,this}setEnabled(t){return this.enabled=t,this}setDensity(t){return this.massPropsMode=ct.Density,this.density=t,this}setMass(t){return this.massPropsMode=ct.Mass,this.mass=t,this}setMassProperties(t,e,r,i){return this.massPropsMode=ct.MassProps,this.mass=t,d.copy(this.centerOfMass,e),d.copy(this.principalAngularInertia,r),g.copy(this.angularInertiaLocalFrame,i),this}setRestitution(t){return this.restitution=t,this}setFriction(t){return this.friction=t,this}setFrictionCombineRule(t){return this.frictionCombineRule=t,this}setRestitutionCombineRule(t){return this.restitutionCombineRule=t,this}setCollisionGroups(t){return this.collisionGroups=t,this}setSolverGroups(t){return this.solverGroups=t,this}setActiveHooks(t){return this.activeHooks=t,this}setActiveEvents(t){return this.activeEvents=t,this}setActiveCollisionTypes(t){return this.activeCollisionTypes=t,this}setContactForceEventThreshold(t){return this.contactForceEventThreshold=t,this}}class Lr{constructor(t){this.raw=t||new x,this.map=new ee,t&&t.forEachColliderHandle(e=>{this.map.set(e,new be(this,e,null))})}free(){this.raw&&this.raw.free(),this.raw=void 0,this.map&&this.map.clear(),this.map=void 0}castClosure(t){return e=>{if(t)return t(this.get(e))}}finalizeDeserialization(t){this.map.forEach(e=>e.finalizeDeserialization(t))}createCollider(t,e,r){let i=r!=null&&r!=null;if(i&&isNaN(r))throw Error("Cannot create a collider with a parent rigid-body handle that is not a number.");let o=e.shape.intoRaw(),a=d.intoRaw(e.translation),l=g.intoRaw(e.rotation),w=d.intoRaw(e.centerOfMass),p=d.intoRaw(e.principalAngularInertia),u=g.intoRaw(e.angularInertiaLocalFrame),_=this.raw.createCollider(e.enabled,o,a,l,e.massPropsMode,e.mass,w,p,u,e.density,e.friction,e.restitution,e.frictionCombineRule,e.restitutionCombineRule,e.isSensor,e.collisionGroups,e.solverGroups,e.activeCollisionTypes,e.activeHooks,e.activeEvents,e.contactForceEventThreshold,i,i?r:0,t.raw);o.free(),a.free(),l.free(),w.free(),p.free(),u.free();let f=i?t.get(r):null,b=new be(this,_,f,e.shape);return this.map.set(_,b),b}remove(t,e,r,i){this.raw.remove(t,e.raw,r.raw,i),this.unmap(t)}unmap(t){this.map.delete(t)}get(t){return this.map.get(t)}len(){return this.map.len()}contains(t){return this.get(t)!=null}forEach(t){this.map.forEach(t)}getAll(){return this.map.getAll()}}class Dr{constructor(t){this.raw=t||new Ht}free(){this.raw&&this.raw.free(),this.raw=void 0}step(t,e,r,i,o,a,l,w,p,u,_,f){let b=d.intoRaw(t);_?this.raw.stepWithEvents(b,e.raw,r.raw,i.raw,o.raw,a.raw,l.raw,w.raw,p.raw,u.raw,_.raw,f,f?f.filterContactPair:null,f?f.filterIntersectionPair:null):this.raw.step(b,e.raw,r.raw,i.raw,o.raw,a.raw,l.raw,w.raw,p.raw,u.raw),b.free()}}var ye;(function(n){n[n.EXCLUDE_FIXED=1]="EXCLUDE_FIXED",n[n.EXCLUDE_KINEMATIC=2]="EXCLUDE_KINEMATIC",n[n.EXCLUDE_DYNAMIC=4]="EXCLUDE_DYNAMIC",n[n.EXCLUDE_SENSORS=8]="EXCLUDE_SENSORS",n[n.EXCLUDE_SOLIDS=16]="EXCLUDE_SOLIDS",n[n.ONLY_DYNAMIC=3]="ONLY_DYNAMIC",n[n.ONLY_KINEMATIC=5]="ONLY_KINEMATIC",n[n.ONLY_FIXED=6]="ONLY_FIXED"})(ye||(ye={}));class Or{constructor(t){this.raw=t||new Ct}free(){this.raw&&this.raw.free(),this.raw=void 0}update(t,e){this.raw.update(t.raw,e.raw)}castRay(t,e,r,i,o,a,l,w,p,u){let _=d.intoRaw(r.origin),f=d.intoRaw(r.dir),b=re.fromRaw(e,this.raw.castRay(t.raw,e.raw,_,f,i,o,a,l,w,p,u));return _.free(),f.free(),b}castRayAndGetNormal(t,e,r,i,o,a,l,w,p,u){let _=d.intoRaw(r.origin),f=d.intoRaw(r.dir),b=vt.fromRaw(e,this.raw.castRayAndGetNormal(t.raw,e.raw,_,f,i,o,a,l,w,p,u));return _.free(),f.free(),b}intersectionsWithRay(t,e,r,i,o,a,l,w,p,u,_){let f=d.intoRaw(r.origin),b=d.intoRaw(r.dir),j=H=>a(vt.fromRaw(e,H));this.raw.intersectionsWithRay(t.raw,e.raw,f,b,i,o,j,l,w,p,u,_),f.free(),b.free()}intersectionWithShape(t,e,r,i,o,a,l,w,p,u){let _=d.intoRaw(r),f=g.intoRaw(i),b=o.intoRaw(),j=this.raw.intersectionWithShape(t.raw,e.raw,_,f,b,a,l,w,p,u);return _.free(),f.free(),b.free(),j}projectPoint(t,e,r,i,o,a,l,w,p){let u=d.intoRaw(r),_=Tt.fromRaw(e,this.raw.projectPoint(t.raw,e.raw,u,i,o,a,l,w,p));return u.free(),_}projectPointAndGetFeature(t,e,r,i,o,a,l,w){let p=d.intoRaw(r),u=Tt.fromRaw(e,this.raw.projectPointAndGetFeature(t.raw,e.raw,p,i,o,a,l,w));return p.free(),u}intersectionsWithPoint(t,e,r,i,o,a,l,w,p){let u=d.intoRaw(r);this.raw.intersectionsWithPoint(t.raw,e.raw,u,i,o,a,l,w,p),u.free()}castShape(t,e,r,i,o,a,l,w,p,u,_,f,b){let j=d.intoRaw(r),H=g.intoRaw(i),k=d.intoRaw(o),V=a.intoRaw(),z=xt.fromRaw(e,this.raw.castShape(t.raw,e.raw,j,H,k,V,l,w,p,u,_,f,b));return j.free(),H.free(),k.free(),V.free(),z}intersectionsWithShape(t,e,r,i,o,a,l,w,p,u,_){let f=d.intoRaw(r),b=g.intoRaw(i),j=o.intoRaw();this.raw.intersectionsWithShape(t.raw,e.raw,f,b,j,a,l,w,p,u,_),f.free(),b.free(),j.free()}collidersWithAabbIntersectingAabb(t,e,r){let i=d.intoRaw(t),o=d.intoRaw(e);this.raw.collidersWithAabbIntersectingAabb(i,o,r),i.free(),o.free()}}class ge{constructor(t){this.raw=t||new Bt}free(){this.raw&&this.raw.free(),this.raw=void 0}serializeAll(t,e,r,i,o,a,l,w,p){let u=d.intoRaw(t);const _=this.raw.serializeAll(u,e.raw,r.raw,i.raw,o.raw,a.raw,l.raw,w.raw,p.raw);return u.free(),_}deserializeAll(t){return ne.fromRaw(this.raw.deserializeAll(t))}}class Fr{constructor(t,e){this.vertices=t,this.colors=e}}class zr{constructor(t){this.raw=t||new Ft}free(){this.raw&&this.raw.free(),this.raw=void 0,this.vertices=void 0,this.colors=void 0}render(t,e,r,i,o){this.raw.render(t.raw,e.raw,r.raw,i.raw,o.raw),this.vertices=this.raw.vertices(),this.colors=this.raw.colors()}}class Hr{}class Gr{constructor(t,e,r,i,o){this.params=e,this.bodies=r,this.colliders=i,this.queries=o,this.raw=new zt(t),this.rawCharacterCollision=new Rt,this._applyImpulsesToDynamicBodies=!1,this._characterMass=null}free(){this.raw&&(this.raw.free(),this.rawCharacterCollision.free()),this.raw=void 0,this.rawCharacterCollision=void 0}up(){return this.raw.up()}setUp(t){let e=d.intoRaw(t);return this.raw.setUp(e)}applyImpulsesToDynamicBodies(){return this._applyImpulsesToDynamicBodies}setApplyImpulsesToDynamicBodies(t){this._applyImpulsesToDynamicBodies=t}characterMass(){return this._characterMass}setCharacterMass(t){this._characterMass=t}offset(){return this.raw.offset()}setOffset(t){this.raw.setOffset(t)}slideEnabled(){return this.raw.slideEnabled()}setSlideEnabled(t){this.raw.setSlideEnabled(t)}autostepMaxHeight(){return this.raw.autostepMaxHeight()}autostepMinWidth(){return this.raw.autostepMinWidth()}autostepIncludesDynamicBodies(){return this.raw.autostepIncludesDynamicBodies()}autostepEnabled(){return this.raw.autostepEnabled()}enableAutostep(t,e,r){this.raw.enableAutostep(t,e,r)}disableAutostep(){return this.raw.disableAutostep()}maxSlopeClimbAngle(){return this.raw.maxSlopeClimbAngle()}setMaxSlopeClimbAngle(t){this.raw.setMaxSlopeClimbAngle(t)}minSlopeSlideAngle(){return this.raw.minSlopeSlideAngle()}setMinSlopeSlideAngle(t){this.raw.setMinSlopeSlideAngle(t)}snapToGroundDistance(){return this.raw.snapToGroundDistance()}enableSnapToGround(t){this.raw.enableSnapToGround(t)}disableSnapToGround(){this.raw.disableSnapToGround()}snapToGroundEnabled(){return this.raw.snapToGroundEnabled()}computeColliderMovement(t,e,r,i,o){let a=d.intoRaw(e);this.raw.computeColliderMovement(this.params.dt,this.bodies.raw,this.colliders.raw,this.queries.raw,t.handle,a,this._applyImpulsesToDynamicBodies,this._characterMass,r,i,this.colliders.castClosure(o)),a.free()}computedMovement(){return d.fromRaw(this.raw.computedMovement())}computedGrounded(){return this.raw.computedGrounded()}numComputedCollisions(){return this.raw.numComputedCollisions()}computedCollision(t,e){if(this.raw.computedCollision(t,this.rawCharacterCollision)){let r=this.rawCharacterCollision;return e=e??new Hr,e.translationApplied=d.fromRaw(r.translationApplied()),e.translationRemaining=d.fromRaw(r.translationRemaining()),e.toi=r.toi(),e.witness1=d.fromRaw(r.worldWitness1()),e.witness2=d.fromRaw(r.worldWitness2()),e.normal1=d.fromRaw(r.worldNormal1()),e.normal2=d.fromRaw(r.worldNormal2()),e.collider=this.colliders.get(r.handle()),e}else return null}}class ne{constructor(t,e,r,i,o,a,l,w,p,u,_,f,b,j){this.gravity=t,this.integrationParameters=new mr(e),this.islands=new jr(r),this.broadPhase=new Pr(i),this.narrowPhase=new Mr(o),this.bodies=new fr(a),this.colliders=new Lr(l),this.impulseJoints=new Rr(w),this.multibodyJoints=new Tr(p),this.ccdSolver=new vr(u),this.queryPipeline=new Or(_),this.physicsPipeline=new Dr(f),this.serializationPipeline=new ge(b),this.debugRenderPipeline=new zr(j),this.characterControllers=new Set,this.impulseJoints.finalizeDeserialization(this.bodies),this.bodies.finalizeDeserialization(this.colliders),this.colliders.finalizeDeserialization(this.bodies)}free(){this.integrationParameters.free(),this.islands.free(),this.broadPhase.free(),this.narrowPhase.free(),this.bodies.free(),this.colliders.free(),this.impulseJoints.free(),this.multibodyJoints.free(),this.ccdSolver.free(),this.queryPipeline.free(),this.physicsPipeline.free(),this.serializationPipeline.free(),this.debugRenderPipeline.free(),this.characterControllers.forEach(t=>t.free()),this.integrationParameters=void 0,this.islands=void 0,this.broadPhase=void 0,this.narrowPhase=void 0,this.bodies=void 0,this.colliders=void 0,this.ccdSolver=void 0,this.impulseJoints=void 0,this.multibodyJoints=void 0,this.queryPipeline=void 0,this.physicsPipeline=void 0,this.serializationPipeline=void 0,this.debugRenderPipeline=void 0,this.characterControllers=void 0}static fromRaw(t){return t?new ne(d.fromRaw(t.takeGravity()),t.takeIntegrationParameters(),t.takeIslandManager(),t.takeBroadPhase(),t.takeNarrowPhase(),t.takeBodies(),t.takeColliders(),t.takeImpulseJoints(),t.takeMultibodyJoints()):null}takeSnapshot(){return this.serializationPipeline.serializeAll(this.gravity,this.integrationParameters,this.islands,this.broadPhase,this.narrowPhase,this.bodies,this.colliders,this.impulseJoints,this.multibodyJoints)}static restoreSnapshot(t){return new ge().deserializeAll(t)}debugRender(){return this.debugRenderPipeline.render(this.bodies,this.colliders,this.impulseJoints,this.multibodyJoints,this.narrowPhase),new Fr(this.debugRenderPipeline.vertices,this.debugRenderPipeline.colors)}step(t,e){this.physicsPipeline.step(this.gravity,this.integrationParameters,this.islands,this.broadPhase,this.narrowPhase,this.bodies,this.colliders,this.impulseJoints,this.multibodyJoints,this.ccdSolver,t,e),this.queryPipeline.update(this.bodies,this.colliders)}propagateModifiedBodyPositionsToColliders(){this.bodies.raw.propagateModifiedBodyPositionsToColliders(this.colliders.raw)}updateSceneQueries(){this.propagateModifiedBodyPositionsToColliders(),this.queryPipeline.update(this.bodies,this.colliders)}get timestep(){return this.integrationParameters.dt}set timestep(t){this.integrationParameters.dt=t}get maxVelocityIterations(){return this.integrationParameters.maxVelocityIterations}set maxVelocityIterations(t){this.integrationParameters.maxVelocityIterations=t}get maxVelocityFrictionIterations(){return this.integrationParameters.maxVelocityFrictionIterations}set maxVelocityFrictionIterations(t){this.integrationParameters.maxVelocityFrictionIterations=t}get maxStabilizationIterations(){return this.integrationParameters.maxStabilizationIterations}set maxStabilizationIterations(t){this.integrationParameters.maxStabilizationIterations=t}createRigidBody(t){return this.bodies.createRigidBody(this.colliders,t)}createCharacterController(t){let e=new Gr(t,this.integrationParameters,this.bodies,this.colliders,this.queryPipeline);return this.characterControllers.add(e),e}removeCharacterController(t){this.characterControllers.delete(t),t.free()}createCollider(t,e){let r=e?e.handle:void 0;return this.colliders.createCollider(this.bodies,t,r)}createImpulseJoint(t,e,r,i){return this.impulseJoints.createJoint(this.bodies,t,e.handle,r.handle,i)}createMultibodyJoint(t,e,r,i){return this.multibodyJoints.createJoint(t,e.handle,r.handle,i)}getRigidBody(t){return this.bodies.get(t)}getCollider(t){return this.colliders.get(t)}getImpulseJoint(t){return this.impulseJoints.get(t)}getMultibodyJoint(t){return this.multibodyJoints.get(t)}removeRigidBody(t){this.bodies&&this.bodies.remove(t.handle,this.islands,this.colliders,this.impulseJoints,this.multibodyJoints)}removeCollider(t,e){this.colliders&&this.colliders.remove(t.handle,this.islands,this.bodies,e)}removeImpulseJoint(t,e){this.impulseJoints&&this.impulseJoints.remove(t.handle,e)}removeMultibodyJoint(t,e){this.impulseJoints&&this.multibodyJoints.remove(t.handle,e)}forEachCollider(t){this.colliders.forEach(t)}forEachRigidBody(t){this.bodies.forEach(t)}forEachActiveRigidBody(t){this.bodies.forEachActiveRigidBody(this.islands,t)}castRay(t,e,r,i,o,a,l,w){return this.queryPipeline.castRay(this.bodies,this.colliders,t,e,r,i,o,a?a.handle:null,l?l.handle:null,this.colliders.castClosure(w))}castRayAndGetNormal(t,e,r,i,o,a,l,w){return this.queryPipeline.castRayAndGetNormal(this.bodies,this.colliders,t,e,r,i,o,a?a.handle:null,l?l.handle:null,this.colliders.castClosure(w))}intersectionsWithRay(t,e,r,i,o,a,l,w,p){this.queryPipeline.intersectionsWithRay(this.bodies,this.colliders,t,e,r,i,o,a,l?l.handle:null,w?w.handle:null,this.colliders.castClosure(p))}intersectionWithShape(t,e,r,i,o,a,l,w){let p=this.queryPipeline.intersectionWithShape(this.bodies,this.colliders,t,e,r,i,o,a?a.handle:null,l?l.handle:null,this.colliders.castClosure(w));return p!=null?this.colliders.get(p):null}projectPoint(t,e,r,i,o,a,l){return this.queryPipeline.projectPoint(this.bodies,this.colliders,t,e,r,i,o?o.handle:null,a?a.handle:null,this.colliders.castClosure(l))}projectPointAndGetFeature(t,e,r,i,o,a){return this.queryPipeline.projectPointAndGetFeature(this.bodies,this.colliders,t,e,r,i?i.handle:null,o?o.handle:null,this.colliders.castClosure(a))}intersectionsWithPoint(t,e,r,i,o,a,l){this.queryPipeline.intersectionsWithPoint(this.bodies,this.colliders,t,this.colliders.castClosure(e),r,i,o?o.handle:null,a?a.handle:null,this.colliders.castClosure(l))}castShape(t,e,r,i,o,a,l,w,p,u,_){return this.queryPipeline.castShape(this.bodies,this.colliders,t,e,r,i,o,a,l,w,p?p.handle:null,u?u.handle:null,this.colliders.castClosure(_))}intersectionsWithShape(t,e,r,i,o,a,l,w,p){this.queryPipeline.intersectionsWithShape(this.bodies,this.colliders,t,e,r,this.colliders.castClosure(i),o,a,l?l.handle:null,w?w.handle:null,this.colliders.castClosure(p))}collidersWithAabbIntersectingAabb(t,e,r){this.queryPipeline.collidersWithAabbIntersectingAabb(t,e,this.colliders.castClosure(r))}contactsWith(t,e){this.narrowPhase.contactsWith(t.handle,this.colliders.castClosure(e))}intersectionsWith(t,e){this.narrowPhase.intersectionsWith(t.handle,this.colliders.castClosure(e))}contactPair(t,e,r){this.narrowPhase.contactPair(t.handle,e.handle,r)}intersectionPair(t,e){return this.narrowPhase.intersectionPair(t.handle,e.handle)}}var Se;(function(n){n[n.COLLISION_EVENTS=1]="COLLISION_EVENTS",n[n.CONTACT_FORCE_EVENTS=2]="CONTACT_FORCE_EVENTS"})(Se||(Se={}));class kr{free(){this.raw&&this.raw.free(),this.raw=void 0}collider1(){return this.raw.collider1()}collider2(){return this.raw.collider2()}totalForce(){return d.fromRaw(this.raw.total_force())}totalForceMagnitude(){return this.raw.total_force_magnitude()}maxForceDirection(){return d.fromRaw(this.raw.max_force_direction())}maxForceMagnitude(){return this.raw.max_force_magnitude()}}class Zd{constructor(t,e){this.raw=e||new Et(t)}free(){this.raw&&this.raw.free(),this.raw=void 0}drainCollisionEvents(t){this.raw.drainCollisionEvents(t)}drainContactForceEvents(t){let e=new kr;this.raw.drainContactForceEvents(r=>{e.raw=r,t(e),e.free()})}clear(){this.raw.clear()}}var Re;(function(n){n[n.FILTER_CONTACT_PAIRS=1]="FILTER_CONTACT_PAIRS",n[n.FILTER_INTERSECTION_PAIRS=2]="FILTER_INTERSECTION_PAIRS"})(Re||(Re={}));var Ee;(function(n){n[n.EMPTY=0]="EMPTY",n[n.COMPUTE_IMPULSE=1]="COMPUTE_IMPULSE"})(Ee||(Ee={}));function $d(){return un()}var q=Object.freeze({__proto__:null,get ActiveCollisionTypes(){return Wt},get ActiveEvents(){return Se},get ActiveHooks(){return Re},Ball:ze,BroadPhase:Pr,CCDSolver:vr,Capsule:ke,CharacterCollision:Hr,get CoefficientCombineRule(){return At},Collider:be,ColliderDesc:T,ColliderSet:Lr,Cone:Xe,ConvexPolyhedron:Vt,Cuboid:He,Cylinder:Ye,DebugRenderBuffers:Fr,DebugRenderPipeline:zr,EventQueue:Zd,get FeatureType(){return pt},FixedImpulseJoint:br,FixedMultibodyJoint:Er,HalfSpace:Nr,Heightfield:Je,ImpulseJoint:st,ImpulseJointSet:Rr,IntegrationParameters:mr,IslandManager:jr,JointData:dt,get JointType(){return D},KinematicCharacterController:Gr,get MassPropsMode(){return ct},get MotorModel(){return me},MultibodyJoint:ot,MultibodyJointSet:Tr,NarrowPhase:Mr,PhysicsPipeline:Dr,PointColliderProjection:Tt,PointProjection:Pt,Polyline:We,PrismaticImpulseJoint:yr,PrismaticMultibodyJoint:Cr,Quaternion:ue,get QueryFilterFlags(){return ye},QueryPipeline:Or,Ray:Xd,RayColliderIntersection:vt,RayColliderToi:re,RayIntersection:Mt,RevoluteImpulseJoint:gr,RevoluteMultibodyJoint:Ir,RigidBody:fe,RigidBodyDesc:K,RigidBodySet:fr,get RigidBodyType(){return W},RotationOps:g,RoundCone:Ze,RoundConvexPolyhedron:Ut,RoundCuboid:Ge,RoundCylinder:Ke,RoundTriangle:Ue,SdpMatrix3:_r,SdpMatrix3Ops:_e,Segment:Be,SerializationPipeline:ge,Shape:O,ShapeColliderTOI:xt,ShapeContact:wt,ShapeTOI:_t,get ShapeType(){return R},get SolverFlags(){return Ee},SphericalImpulseJoint:Sr,SphericalMultibodyJoint:Ar,TempContactForceEvent:kr,TempContactManifold:xr,TriMesh:qe,Triangle:Ve,UnitImpulseJoint:Oe,UnitMultibodyJoint:Fe,Vector3:ur,VectorOps:d,World:ne,version:$d}),et=(n=>(n[n.Dynamic=0]="Dynamic",n[n.Fixed=1]="Fixed",n[n.KinematicPositionBased=2]="KinematicPositionBased",n[n.KinematicVelocityBased=3]="KinematicVelocityBased",n[n.Sensor=4]="Sensor",n))(et||{});const Qd=n=>Number.parseInt(n.reverse().join(""),2),th=(n,t)=>n&1<<t?1:0,eh=(n,t,e)=>{const r=1<<t;return e===1?n|r:n&~r},rh=(n,t)=>n^1<<t,nh=(n,t)=>n&~(1<<t),ih=(n,t=8)=>n.toString(2).padStart(t,"0").split("").reverse().map(Number),sh={clearBit:nh,create:Qd,getBit:th,getBits:ih,setBit:eh,toggleBit:rh};let rr=-1;const oh=()=>(rr+=1,rr);var Q=(n=>(n[n.Cuboid=0]="Cuboid",n[n.Ball=1]="Ball",n[n.Capsule=2]="Capsule",n[n.Cone=3]="Cone",n[n.ConvexHull=4]="ConvexHull",n[n.Cylinder=5]="Cylinder",n[n.Trimesh=6]="Trimesh",n[n.Heightfield=7]="Heightfield",n))(Q||{});const ah=n=>{switch(n.collider){case Q.Ball:return T.ball(n.collider1);case Q.Capsule:return T.capsule(n.collider2,n.collider1);case Q.Cone:return T.cone(n.collider2,n.collider1);case Q.ConvexHull:return T.convexHull(n.vertices);case Q.Cuboid:return T.cuboid(n.collider1,n.collider2,n.collider3);case Q.Cylinder:return T.cylinder(n.collider2,n.collider1);case Q.Heightfield:return T.heightfield(n.collider1,n.collider2,n.vertices,{x:1,y:1,z:1});case Q.Trimesh:return T.trimesh(n.vertices,n.indices??new Uint32Array(0))}throw new Error("bodytype not supported")},$e=1e3/Number.parseInt({}.SWORD_FPS??"60",10),ch=Number.parseFloat({}.SWORD_DEBUG_SLOWDOWN??"3"),lh=Number.parseFloat({}.DEFAULT_GRAVITY??"-9.8"),dh=Number.parseFloat({}.SWORD_DEFAULT_FRICTION??"0.2"),hh=Number.parseFloat({}.SWORD_DEFAULT_RESTITUTION??"0.5"),J=new q.World({x:0,y:lh,z:0});J.timestep=$e/1e3;const nr=new q.EventQueue(!0);let bt=0,Ce=0,Br=0,Vr=-1,ir=-1;const wh=()=>{J.step(nr),bt=performance.now(),Br=1e3/(bt-Ce),Ce=bt;const n=[],t=[];for(let p=0,u=yt.length;p<u;p+=1){const _=yt[p];if(_.isSleeping())continue;n.push(_.userData);const f=_.translation(),b=_.rotation();t.push(f.x,f.y,f.z,b.x,b.y,b.z,b.w)}const e=new Uint16Array(n),r=new Float32Array(t),i=[],o=[];nr.drainCollisionEvents((p,u,_)=>{const f=pe.get(p),b=pe.get(u);if(_&&Ie.get(f)){const j=gt.get(f),H=gt.get(b);J.contactPair(j,H,(k,V)=>{let z=k.localContactPoint1(0),Y=k.localContactPoint2(0);if(z!==null&&Y!==null){if(V){const ft=z;z=Y,Y=ft}o.push(f,b,z.x,z.y,z.z,Y.x,Y.y,Y.z)}})}else _||i.push(f,b)});const a=new Uint16Array(o),l=new Uint16Array(i),w=new Float32Array(o);self.postMessage({collisionEnd:l,collisionStart:a,contactStart:w,event:C.TRANSFORMS,ids:e,transforms:r},[l.buffer,a.buffer,w.buffer,e.buffer,r.buffer])},ph=()=>{if(J===void 0)return;const{colors:n,vertices:t}=J.debugRender();self.postMessage({colors:n,event:C.DEBUG_DRAW,vertices:t},[t.buffer,n.buffer])},uh=n=>{bt=performance.now(),Ce=bt,Vr=self.setInterval(wh,$e),postMessage({event:C.RUN,pid:n})},_h=(n,t=ch)=>{n?ir=self.setInterval(ph,$e*t):clearInterval(ir)},fh=n=>{clearInterval(Vr),postMessage({event:C.PAUSE,pid:n})},mh=n=>{switch(n){case et.Dynamic:return q.RigidBodyType.Dynamic;case et.KinematicPositionBased:return q.RigidBodyType.KinematicPositionBased;case et.KinematicVelocityBased:return q.RigidBodyType.KinematicVelocityBased;case et.Fixed:case et.Sensor:return q.RigidBodyType.Fixed}},bh=(n=[],t=[])=>{const e=new Array(32).fill(0);for(let r=0,i=n.length;r<i;r+=1)e[n[r]]=1;for(let r=0,i=t.length;r<i;r+=1)e[16+t[r]]=1;return sh.create(e)},yh=n=>{const t=oh(),e=new q.RigidBodyDesc(mh(n.type)).setCanSleep(n.canSleep).setCcdEnabled(n.ccd),r=ah(n).setDensity(n.density).setFriction(dh).setFrictionCombineRule(q.CoefficientCombineRule.Max).setRestitution(hh).setRestitutionCombineRule(q.CoefficientCombineRule.Max).setSensor(n.type===et.Sensor);if(n.groups!==void 0||n.filter!==void 0){const a=bh(n.groups,n.filter);r.setCollisionGroups(a)}const i=J.createRigidBody(e),o=J.createCollider(r,i);return n.events===sr.CONTACT_EVENTS?(o.setActiveEvents(q.ActiveEvents.COLLISION_EVENTS),Ie.set(t,!0)):n.events>-1?o.setActiveEvents(n.events):o.setActiveEvents(q.ActiveEvents.COLLISION_EVENTS),n.type===et.Dynamic&&yt.push(i),i.userData=t,F.set(t,i),gt.set(t,o),pe.set(i.handle,t),i},gh=n=>{const{instances:t}=n,e=t.length/7,r=new Uint16Array(e);for(let i=0,o=0;i<e;i+=1,o+=7){const a=yh(n),l=a.userData;r[i]=l,n.disabled?a.setTranslation({x:0,y:-2e3+l*((n.collider1??-10)-10),z:0},!1):(a.setTranslation({x:t[o+0],y:t[o+1],z:t[o+2]},!1),a.setRotation({w:t[o+3],x:t[o+4],y:t[o+5],z:t[o+6]},!1))}self.postMessage({event:C.CREATE_RIGIDBODIES,ids:r,pid:n.pid},[r.buffer])},Sh=n=>{yt.splice(0,yt.length),F.clear(),gt.clear(),Ie.clear(),J.bodies.free(),postMessage({event:C.DESTROY_ALL_RIGIDBODIES,pid:n})},Rh=(n,t,e)=>{J.gravity.x=n,J.gravity.y=t,J.gravity.z=e};self.addEventListener("message",n=>{const{data:t}=n;switch(t.event){case C.APPLY_IMPULSES:return Wr(t.ids,t.impulses);case C.APPLY_TORQUE_IMPULSES:return Jr(t.ids,t.impulses);case C.APPLY_LINEAR_AND_TORQUE_IMPULSES:return qr(t.ids,t.impulses);case C.CREATE_RIGIDBODIES:return gh(t);case C.DESTROY_ALL_RIGIDBODIES:return Sh(t.pid);case C.DISABLE_BODY:return Yr(t.id);case C.GET_VELOCITY:return an(t.id,t.pid);case C.GET_VELOCITIES:return cn(t.ids,t.pid);case C.PAUSE:return fh(t.pid);case C.RUN:return uh(t.pid);case C.SET_ACTIVE_COLLISION_TYPES:return Kr(t.id,t.types);case C.SET_DEBUG_DRAW:return _h(t.on,t.slowdown);case C.SET_FORCES:return Xr(t.ids,t.forces);case C.SET_GRAVITY:return Rh(t.x,t.y,t.z);case C.SET_NEXT_KINEMATIC_TRANSFORM:return Zr(t);case C.SET_NEXT_KINEMATIC_TRANSFORMS:return $r(t.ids,t.transforms);case C.SET_TRANSLATION:return rn(t.id,t.translation,t.resetAngvel,t.resetLinvel);case C.SET_TRANSLATIONS:return nn(t.ids,t.translations,t.resetAngvel,t.resetLinvel);case C.SET_TRANSFORMS:return Qr(t.ids,t.transforms,t.resetAngvel,t.resetLinvel);case C.SET_TRANSFORM_AND_VELOCITY:return tn(t.id,t.translation,t.rotation,t.linvel,t.angvel);case C.SET_TRANSFORMS_AND_VELOCITIES:return en(t.ids,t.array);case C.SET_VELOCITIES:return sn(t.ids,t.velocities);case C.SET_VELOCITIES_AND_ROTATIONS:return on(t.ids,t.array);default:throw new Error(`Unexpected event in worker: ${t.event}!`)}});({}).SWORD_DEBUG==="true"&&setInterval(()=>{postMessage({event:C.FPS,fps:Br})},1e3);self.postMessage({event:C.INIT});
