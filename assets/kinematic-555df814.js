import{g as D,B as _,d as c,e as C,f as F,C as y,M as A,N as K,c as f,R as N,a as m,h as w,s as X,i as g}from"./index-6117cbb4.js";import{b as n,h as e}from"./boxes-92c46fe0.js";import{r as u}from"./colors-e29a5892.js";var o;(function(a){a[a.DYNAMIC_DYNAMIC=1]="DYNAMIC_DYNAMIC",a[a.DYNAMIC_KINEMATIC=12]="DYNAMIC_KINEMATIC",a[a.DYNAMIC_FIXED=2]="DYNAMIC_FIXED",a[a.KINEMATIC_KINEMATIC=52224]="KINEMATIC_KINEMATIC",a[a.KINEMATIC_FIXED=8704]="KINEMATIC_FIXED",a[a.FIXED_FIXED=32]="FIXED_FIXED",a[a.DEFAULT=15]="DEFAULT",a[a.ALL=60943]="ALL"})(o||(o={}));var s;(function(a){a[a.Density=0]="Density",a[a.Mass=1]="Mass",a[a.MassProps=2]="MassProps"})(s||(s={}));const{scene:z}=D(),Y=new _(2,2,2),L=new c({color:"lightblue"}),t=new C(Y,L);t.name="player";z.add(t);t.position.set(0,1,0);const{update:b}=D(),{keyboard:E}=F(),M=new y,d=new A,I=15;for(let a=0;a<K;a+=1)M.set(u()),n.setColorAt(a,M),d.setPosition(Math.random()*I-I/2,2,Math.random()*I-I/2),n.setMatrixAt(a,d);n.instanceColor.needsUpdate=!0;await f(n,{type:N.Dynamic,collider:m.Cuboid,hx:e,hy:e,hz:e});const x=await w(t,{type:N.KinematicPositionBased,collider:m.Cuboid,hx:1,hy:1,hz:1});X(x,o.DEFAULT|o.KINEMATIC_FIXED);b(()=>{const{position:a,quaternion:r,rotation:h}=t;a.x+=E.x/5,a.z-=E.y/5,h.y+=.1,g(x,{x:a.x,y:a.y,z:a.z},{x:r.x,y:r.y,z:r.z,w:r.w})});
